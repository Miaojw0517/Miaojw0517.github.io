<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>webpack5 | 啤啤熊</title><meta name="keywords" content="Webpack"><meta name="author" content="啤啤熊"><meta name="copyright" content="啤啤熊"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="引用站外地址                                            尚硅谷 Web 前端之 Webpack5 教程                https:&#x2F;&#x2F;yk2012.github.io&#x2F;sgg_webpack5&#x2F;                                     前言webpack是打包工具，平时开发时我们使用的框架(v"><meta property="og:type" content="article"><meta property="og:title" content="webpack5"><meta property="og:url" content="https://ppxiong.msirknightblog.cn/2024/03/09/learning/webpack/webpack5/index.html"><meta property="og:site_name" content="啤啤熊"><meta property="og:description" content="引用站外地址                                            尚硅谷 Web 前端之 Webpack5 教程                https:&#x2F;&#x2F;yk2012.github.io&#x2F;sgg_webpack5&#x2F;                                     前言webpack是打包工具，平时开发时我们使用的框架(v"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-25.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50"><meta property="article:published_time" content="2024-03-09T12:17:40.000Z"><meta property="article:modified_time" content="2024-05-27T01:58:03.098Z"><meta property="article:author" content="啤啤熊"><meta property="article:tag" content="Webpack"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-25.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50"><link rel="shortcut icon" href="https://www.msirknightblog.cn/static/images/site/avatar.jpg?imageMogr2/thumbnail/200x/blur/1x0/quality/75|imageslim"><link rel="canonical" href="https://ppxiong.msirknightblog.cn/2024/03/09/learning/webpack/webpack5/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://npm.elemecdn.com/@fortawesome/fontawesome-free@latest/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/@fancyapps/ui@latest/dist/fancybox.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"72G1NZ2R6Z",apiKey:"f1ea06bf398a3faacaeeb2ce42db29ee",indexName:"firstIndex",hits:{per_page:6},languages:{input_placeholder:"搜索文章",hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:350},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!0,post:!0},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#4276c9",bgDark:"#203961",position:"top-right"},source:{justifiedGallery:{js:"https://npm.elemecdn.com/flickr-justified-gallery@latest/dist/fjGallery.min.js",css:"https://npm.elemecdn.com/flickr-justified-gallery@latest/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"webpack5",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-05-27 09:58:03"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,a){if(0!==a){const o=new Date;a=864e5*a,t={value:t,expiry:o.getTime()+a};localStorage.setItem(e,JSON.stringify(t))}},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);const a=new Date;if(!(a.getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=o=>new Promise((t,e)=>{const a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};var e=saveToLocal.get("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,o=window.matchMedia("(prefers-color-scheme: no-preference)").matches,c=!t&&!a&&!o;if(void 0===e){if(a)activateLightMode();else if(t)activateDarkMode();else if(o||c){const n=new Date;a=n.getHours();(a<=6||18<=a?activateDarkMode:activateLightMode)()}window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode:activateLightMode)()})}else("light"===e?activateLightMode:activateDarkMode)();t=saveToLocal.get("aside-status");void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><meta name="referrer" content="no-referrer"><link rel="stylesheet" href="/css/customer_style.css"><link rel="stylesheet" href="https://www.msirknightblog.cn/static/css/customer_butterfly.css"><link rel="stylesheet" href="https://www.msirknightblog.cn/static/css/rightMenu.css"><link rel="stylesheet" href="https://www.msirknightblog.cn/static/css/commentBarrage.css"><link rel="stylesheet" href="https://www.msirknightblog.cn/static/css/essay_page.css"><link rel="stylesheet" href="https://www.msirknightblog.cn/static/css/cheesy_pick-up_lines.css"><link rel="stylesheet" href="https://www.msirknightblog.cn/static/css/stars.css"><link rel="stylesheet" href="https://at.alicdn.com/t/c/font_3970213_1fi3ffivzda.css"><style id="barragesColor"></style><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper-anzhiyu@1.0.4/lib/swiper.min.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/remixicon@2.5.0/fonts/remixicon.css"><link rel="stylesheet" href="https://www.msirknightblog.cn/static/font/iconfont.css"><svg aria-hidden="true" style="position:absolute;overflow:hidden;width:0;height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><link rel="stylesheet" href="https://www.msirknightblog.cn/static/css/cardlistpost.min.css"><style>#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags:before{content:"\A"}#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags>.article-meta__separator{display:none}</style><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><script>const preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()})</script><link rel="stylesheet" href="https://www.msirknightblog.cn/static/css/progress_bar.css"><script src="/"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/site/avatar.jpg?imageMogr2/thumbnail/200x/blur/1x0/quality/75|imageslim" onerror='onerror=null,src="https://www.msirknightblog.cn/static/images/blog/404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">131</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/talk/"><i class="fa-fw fas fa-video"></i><span> 动态</span></a></li><li><a class="site-page child" href="/wish-list/"><i class="fa-fw fa-fw fas fa-bars-staggered"></i><span> 清单</span></a></li><li><a class="site-page child" href="/photo-wall/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 友链</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/comments/"><i class="fa-fw fas fa-envelope"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-sharp fa-solid fa-folder-open"></i><span> 收藏</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/repository/"><i class="fa-fw fas fa-sharp fa-solid fa-layer-group"></i><span> 资源库</span></a></li><li><a class="site-page child" href="/common-lib/"><i class="fa-fw fas fa-sharp fa-solid fa-cube"></i><span> 开发常用库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-layer-group"></i><span> 统计</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="back-home"><div class="back-home-button" tabindex="-1"><i class="back-home-button-icon fas fa-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="/" title="前往博客主页" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/site/avatar.jpg"><span class="back-menu-item-text">我的博客</span></a><a class="back-menu-item" href="https://cloud.tencent.com/login?s_url=https%3A%2F%2Fconsole.cloud.tencent.com%2Fdomain%2Fall-domain" rel="external nofollow" title="前往腾讯云" target="_blank" one-link-mark="yes"><i class="back-menu-item-icon iconfont icon-yun"></i><span class="back-menu-item-text">腾讯云服务</span></a><a class="back-menu-item" href="https://portal.qiniu.com/kodo/bucket" rel="external nofollow" title="前往七牛云图床" target="_blank" one-link-mark="yes"><i class="back-menu-item-icon iconfont icon-yun"></i><span class="back-menu-item-text">七牛云图床</span></a><a class="back-menu-item" href="https://memos.msirknightblog.cn/explore" rel="external nofollow" title="前往Memos" target="_blank" one-link-mark="yes"><i class="back-menu-item-icon iconfont icon-dongtai"></i><span class="back-menu-item-text">Memos动态</span></a><a class="back-menu-item" href="http://82.157.255.243:81/" rel="external nofollow" title="Nginx Proxy Manager" target="_blank" one-link-mark="yes"><i class="back-menu-item-icon iconfont icon-daililiebiaoICO"></i><span class="back-menu-item-text">Nginx Proxy Manager</span></a></div></div></div></div></span><span id="blog_name"><a id="site-name" href="/" title="返回博客主页"><span>啤啤熊 </span></a></span><span id="page_name"><a id="page-name-text" title="回到顶部" onclick="btf.scrollToDest(0,500)"><span>啤啤熊</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/talk/"><i class="fa-fw fas fa-video"></i><span> 动态</span></a></li><li><a class="site-page child" href="/wish-list/"><i class="fa-fw fa-fw fas fa-bars-staggered"></i><span> 清单</span></a></li><li><a class="site-page child" href="/photo-wall/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 友链</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/comments/"><i class="fa-fw fas fa-envelope"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-sharp fa-solid fa-folder-open"></i><span> 收藏</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/repository/"><i class="fa-fw fas fa-sharp fa-solid fa-layer-group"></i><span> 资源库</span></a></li><li><a class="site-page child" href="/common-lib/"><i class="fa-fw fas fa-sharp fa-solid fa-cube"></i><span> 开发常用库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-layer-group"></i><span> 统计</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div><div id="hotkey"><div id="search-button"><a class="site-page social-icon search" title="搜索"><i class="ri-search-eye-line"></i></a></div><div id="randompost-button"><a class="site-page" title="随机文章" onclick="toRandomPost()"><i class="ri-subway-fill"></i></a></div><div id="mode-button"><a class="site-page" title="浅色和深色模式转换" onclick="navFn.switchDarkMode()"><i class="ri-sun-fill"></i></a></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-top-cover" style="background-image:url(https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-25.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50)"></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-info"><h1 class="post-title">webpack5</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-03-09T12:17:40.000Z" title="发表于 2024-03-09 20:17:40">2024-03-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-27T01:58:03.098Z" title="更新于 2024-05-27 09:58:03">2024-05-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/FrontEnd/">FrontEnd</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">17k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>73分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><a class="tag-Link" target="_blank" href="https://yk2012.github.io/sgg_webpack5/"><div class="tag-link-tips">引用站外地址</div><div class="tag-link-bottom"><div class="tag-link-left" style="background-image:url(https://www.msirknightblog.cn/static/images/site/avatar.jpg)"></div><div class="tag-link-right"><div class="tag-link-title">尚硅谷 Web 前端之 Webpack5 教程</div><div class="tag-link-sitename">https://yk2012.github.io/sgg_webpack5/</div></div><i class="fa-solid fa-angle-right"></i></div></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><div class="note primary flat"><p><code>webpack</code>是打包工具，平时开发时我们使用的框架(<code>vue</code> <code>react</code>) 以及样式处理器(<code>scss</code> <code>less</code>)等技术<code>在浏览器端是无法被识别的</code>这时候的需要<code>webpack</code>打包成<code>(js css)</code>后才能被浏览器识别而<code>webpack5</code>是<code>webpack</code>的最新版本<code>它</code>支持<code>ES6</code>语法<code>并且</code>支持<code>tree shaking</code>优化打包<code>体积</code>!</p></div><blockquote><p><code>webpack</code>是<code>静态资源打包工具</code>!<br>它会<code>以一个文件</code>或<code>多个文件</code>作为入口，将我们整个项目所有<code>编译合成一个</code>或<code>多个文件</code>!<br>输出好的文件就是编译好的文件，可以直接在浏览器中运行!<br><code>webpack</code>输出的文件为<code>bundle</code>文件!</p></blockquote><p><code>主流的打包工具</code>:</p><ol><li><code>Grunt</code></li><li><code>Gulp</code></li><li><code>Parcel</code></li><li><code>Webpack</code></li><li><code>Rollup</code></li><li><code>Vite</code></li></ol><div class="note info flat"><p><code>webpack</code>本身功能是有限的:<br><code>开发模式</code>: 仅能编译<code>js</code>中的<code>ES Module</code>语法!<br><code>生产模式</code>: 仅能编译<code>js</code>中的<code>ES Module</code>语法 ，以及<code>压缩代码</code>!</p></div><h2 id="简单案例"><a href="#简单案例" class="headerlink" title="简单案例"></a><code>简单案例</code></h2><h3 id="工程目录"><a href="#工程目录" class="headerlink" title="工程目录"></a><code>工程目录</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">├── dist <span class="comment"># 打包后的文件 输出文件目录</span></span><br><span class="line">│   └── main.js</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── package.json</span><br><span class="line">├── public</span><br><span class="line">│   └── index.html</span><br><span class="line">└── src</span><br><span class="line">    ├── js</span><br><span class="line">    │   ├── count.js</span><br><span class="line">    │   └── sum.js</span><br><span class="line">    └── main.js <span class="comment"># 入口文件</span></span><br></pre></td></tr></table></figure><h3 id="搭建项目目录及文件"><a href="#搭建项目目录及文件" class="headerlink" title="搭建项目目录及文件"></a><code>搭建项目目录及文件</code></h3><blockquote><p><code>workspace</code> &gt; <code>webapck</code> &gt; <code>webpack_demo1</code> &gt; <code>具体文件如以下内容!</code><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">├── public</span><br><span class="line">│   └── index.html</span><br><span class="line">└── src</span><br><span class="line">    ├── js</span><br><span class="line">    │   ├── count.js</span><br><span class="line">    │   └── sum.js</span><br><span class="line">    └── main.js <span class="comment"># 入口文件</span></span><br></pre></td></tr></table></figure><p></p></blockquote><p><strong><code>文件内容如下</code></strong></p><div class="tabs" id="文件"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#文件-1">count.js</button></li><li class="tab"><button type="button" data-href="#文件-2">sum.js</button></li><li class="tab"><button type="button" data-href="#文件-3">main.js</button></li><li class="tab"><button type="button" data-href="#文件-4">index.html</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="文件-1"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">count</span>(<span class="params"> num </span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> num++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="文件-2"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="文件-3"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;./js/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;./js/sum&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> sumResult = <span class="title function_">sum</span>(<span class="number">12</span>,<span class="number">25</span>);</span><br><span class="line"><span class="keyword">const</span> countResult = <span class="title function_">count</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sum result: &quot;</span> + sumResult)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;count result: &quot;</span> + countResult)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="文件-4"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello webpack<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../dist/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p><code>sum.js</code> <code>count.js</code> 导出的内容,整合到<code>main.js</code>，然后在<code>index.html</code>中引入<code>main.js</code>!</p></blockquote><h3 id="初始化-npm-目录"><a href="#初始化-npm-目录" class="headerlink" title="初始化 npm 目录"></a><code>初始化 npm 目录</code></h3><blockquote><p>创建初始化的<code>package.json</code>文件! <code>-y</code>参数为<code>不在询问中创建</code> 直接生成<code>package.json</code>文件!</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure><h3 id="安装-webpack-依赖"><a href="#安装-webpack-依赖" class="headerlink" title="安装 webpack 依赖"></a><code>安装 webpack 依赖</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli -D</span><br></pre></td></tr></table></figure><span class="p red">注意:</span><p><code>package.json</code> 文件中 <code>name</code> 不能为 <code>webpack</code>, 否则会下载不下来!</p><p><strong><code>package.json</code></strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack_demo1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./src/main.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;webpack&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.90.3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;webpack-cli&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.1.4&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="使用打包"><a href="#使用打包" class="headerlink" title="使用打包"></a><code>使用打包</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack ./src/main.js --mode=development --output-path=./dist</span><br></pre></td></tr></table></figure><div class="note info flat"><p><code>--mode</code>: 打包模式<code>开发模式_development</code> 和 <code>生产模式_production</code> <code>(会压缩文件)</code><br><code>--output-path</code>: 输出文件目录<code>地址</code>!</p></div><blockquote><p><code>npx</code> 是用来执行<code>本地环境变量</code>及<code>node_modules</code>下的<code>./bin</code>目录下的命令!</p></blockquote><h2 id="webpack核心概念"><a href="#webpack核心概念" class="headerlink" title="webpack核心概念"></a><code>webpack</code>核心概念</h2><ul><li><code>entry</code>(入口): 指示<code>webpack</code>从<code>哪个文件开始下手</code>!</li><li><code>output</code>(出口): <code>webpack</code>打包后的<code>文件输出位置</code>!</li><li><code>loader</code>(加载器): <code>webpack</code>本身只能处理<code>js json</code>等资源，需要借助其他<code>loader</code> <code>webpack</code>才能解析!</li><li><code>plugins</code>(插件): <code>扩展webpack</code>功能的工具!</li><li><code>devServer</code>(开发服务): <code>自动化打包工具 自动编译打包!</code></li><li><code>mode</code>(模式): <code>开发模式_development</code> 和 <code>生产模式_production</code></li></ul><h2 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a><code>webpack.config.js</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line"><span class="comment">// 当前 `webpack.config.js` 所在的文件目录下的 dist 目录</span></span><br><span class="line"><span class="keyword">const</span> outputPath = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 输出文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">// 绝对路径</span></span><br><span class="line">    <span class="attr">path</span>: outputPath,</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;bundle.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置loader 解析 vue scss less ...</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">/* &#123;</span></span><br><span class="line"><span class="comment">        test: /\.css$/,</span></span><br><span class="line"><span class="comment">        use: [&quot;style-loader&quot;, &quot;css-loader&quot;],</span></span><br><span class="line"><span class="comment">      &#125;,</span></span><br><span class="line"><span class="comment">      &#123;</span></span><br><span class="line"><span class="comment">        test: /\.js$/,</span></span><br><span class="line"><span class="comment">        exclude: /node_modules/,</span></span><br><span class="line"><span class="comment">        use: &#123;</span></span><br><span class="line"><span class="comment">          loader: &quot;babel-loader&quot;,</span></span><br><span class="line"><span class="comment">        &#125;,</span></span><br><span class="line"><span class="comment">      &#125;, */</span></span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置插件扩展 webpack 功能</span></span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="comment">// 配置模式</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">8080</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/* resolve: &#123;</span></span><br><span class="line"><span class="comment">    extensions: [&quot;.js&quot;, &quot;.vue&quot;, &quot;.json&quot;],</span></span><br><span class="line"><span class="comment">    alias: &#123;</span></span><br><span class="line"><span class="comment">      // 设置别名</span></span><br><span class="line"><span class="comment">      vue: &quot;vue/dist/vue.esm.js&quot;,</span></span><br><span class="line"><span class="comment">      &quot;@&quot;: path.resolve(__dirname, &quot;src&quot;),</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">  &#125;, */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="重新打包"><a href="#重新打包" class="headerlink" title="重新打包"></a><code>重新打包</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p><strong>相对于以下方式打包</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webapck ./src/main.js --mode=development</span><br></pre></td></tr></table></figure><blockquote><p><code>webpack</code> 会自动查找<code>webpack.config.js</code>配置文件进行打包输出!</p></blockquote><h2 id="开发模式"><a href="#开发模式" class="headerlink" title="开发模式"></a><code>开发模式</code></h2><blockquote><ol><li><code>编译代码</code> 是浏览器识别运行!<br>开发时我们有<code>样式资源</code> <code>图片资源</code> <code>html资源等</code>, <code>webpack</code>默认无法处理这些资源，所以<code>需要加载配置进行处理</code>!</li><li><code>代码质量检查</code><br>提前检查代码一些隐患，让代码运行时更健壮， 规范代码格式，统一风格!</li></ol></blockquote><h2 id="处理资源"><a href="#处理资源" class="headerlink" title="处理资源"></a><code>处理资源</code></h2><blockquote><p><code>webpack</code> 本身不能处理<code>样式资源</code>,需要通过<code>loader</code>加载器来配置 <code>css</code> <code>less</code> <code>sass</code> <code>stylus</code>等资源!<br>可以通过<code>webpack文档</code>来找到对应的<code>loader</code>!</p></blockquote><a class="tag-Link" target="_blank" href="https://webpack.docschina.org/loaders/"><div class="tag-link-tips">引用站外地址</div><div class="tag-link-bottom"><div class="tag-link-left" style="background-image:url(https://www.msirknightblog.cn/static/images/site/avatar.jpg)"></div><div class="tag-link-right"><div class="tag-link-title">webpack文档_loader</div><div class="tag-link-sitename">https://webpack.docschina.org/loaders/</div></div><i class="fa-solid fa-angle-right"></i></div></a><h3 id="css"><a href="#css" class="headerlink" title="css"></a><code>css</code></h3><blockquote><p><code>css-loader</code> : 将<code>css</code> 转换为 <code>commonjs</code>模块到<code>js</code>中!<br><code>style-loader</code>: 将<code>js</code>中的<code>css</code>资源通过创建<code>style</code>标签添加到<code>html</code>文件中生效!</p></blockquote><p><strong><code>安装loader</code></strong><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install style-loader css-loader -D</span><br></pre></td></tr></table></figure><p></p><p><strong><code>配置loader</code></strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> outputPath = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 输出文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: outputPath,</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;bundle.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置loader 解析 vue scss less ...</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p></p><span class="p red">注意:</span><p><code>use</code> 下可以配置多个<code>loader</code>, 执行顺序<code>从右到左 从下到上!</code></p><h3 id="less"><a href="#less" class="headerlink" title="less"></a><code>less</code></h3><blockquote><p><code>less</code> 和 <code>less-loader</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install less less-loader -D</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> outputPath = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 输出文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: outputPath,</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;bundle.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置loader 解析 vue scss less ...</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="sass"><a href="#sass" class="headerlink" title="sass"></a><code>sass</code></h3><blockquote><p><code>sass</code> 和 <code>sass-loader</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass sass-loader -D</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> outputPath = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 输出文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: outputPath,</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;bundle.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置loader 解析 vue scss less ...</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="stylus"><a href="#stylus" class="headerlink" title="stylus"></a><code>stylus</code></h3><blockquote><p><code>stylus-loader</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install stylus stylus-loader -D</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> outputPath = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 输出文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: outputPath,</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;bundle.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置loader 解析 vue scss less ...</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="图片资源"><a href="#图片资源" class="headerlink" title="图片资源"></a><code>图片资源</code></h3><div class="note info flat"><p>在<code>webpack4</code>中处理图片资源,是通过<code>file-loader</code> <code>url-loader</code>进行处理的!<br>在<code>webpack5</code>中已经将以上<code>loader</code>整合在一起了,只需要通过配置即可!</p></div><p><strong><code>配置项</code></strong></p><blockquote><p><code>解析资源配置</code> 以下时 将<code>指定大小图片</code>资源解析为 <code>base64</code> 或者 <code>url</code>!</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置图片资源</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  test<span class="punctuation">:</span> /\.(png|jpg|jpeg|gif|svg|eot|ttf|woff|woff2|png|ico)$/<span class="punctuation">,</span></span><br><span class="line">  type<span class="punctuation">:</span> <span class="string">&quot;asset&quot;</span><span class="punctuation">,</span></span><br><span class="line">  parser<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 配置解析 base64 当图片小于 10kb 转换为 base64 减少请求</span></span><br><span class="line">    dataUrlCondition<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="comment">// 小于100kb的图片转base64</span></span><br><span class="line">      <span class="comment">// 优点: 减少请求数量 缺点: 体积会更大</span></span><br><span class="line">      maxSize<span class="punctuation">:</span> <span class="number">100</span> * <span class="number">1024</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><details class="folding-tag"><summary>具体配置</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> outputPath = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 输出文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: outputPath,</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;bundle.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置loader 解析 vue scss less ...</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            <span class="comment">// 执行顺序 从 右 到 左 从 下 到上 </span></span><br><span class="line">            <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置图片资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|jpeg|gif|svg|eot|ttf|woff|woff2|png|ico)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="comment">// 配置解析 base64 当图片小于 10kb 转换为 base64 减少请求</span></span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="comment">// 小于100kb的图片转base64</span></span><br><span class="line">            <span class="comment">// 优点: 减少请求数量 缺点: 体积会更大</span></span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/front_end/webpack/webpack_asset_img.jpg"><h3 id="字体图标或其他资源"><a href="#字体图标或其他资源" class="headerlink" title="字体图标或其他资源"></a>字体图标或其他资源</h3><blockquote><p><code>module &gt; rules</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置图标资源</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.ttf|woff|woff2?|map3|map4|avi$/</span>,</span><br><span class="line">    <span class="comment">// 将字体或其他格式类型[mp3 mp4]资源直接输出到指定目录</span></span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">    <span class="attr">generator</span>: &#123;</span><br><span class="line">      <span class="comment">// 输出格式 [name]icon的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/fonts/[name].[hash:8][ext][query]&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="处理js资源"><a href="#处理js资源" class="headerlink" title="处理js资源"></a>处理<code>js</code>资源</h3><div class="note info flat"><p>有人可能会问，<code>js</code> 资源 <code>Webpack</code> 不能已经处理了吗，为什么我们还要处理呢?原因是 <code>Webpack</code> 对<code>js</code> 处理是有限的，只能编译<code>js</code> 中 <code>ES 模块化语法</code>，不能编译其他语法，<code>导致js 不能在IE 等浏览器运行</code>，所以我们希望做一些<code>兼容性处理</code>。<br>其次开发中，团队对代码格式是有严格要求的，我们不能由肉眼去检测代码格式，需要使用专业的工具来检测。<br>。<code>针对is 兼容性处理，我们使用 Babel 来完成。</code> <code>针对代码格式，我们使用 Eslint 来完成</code><br>我们先完成 <code>Eslint</code>，检测代码格式无误后，在由 <code>Babel</code> 做<code>代码兼容性处理</code></p></div><h4 id="ESlint代码规则检查"><a href="#ESlint代码规则检查" class="headerlink" title="ESlint代码规则检查"></a><code>ESlint</code>代码规则检查</h4><blockquote><p><code>ESlint</code> 是一个 <code>JavaScript</code> 代码检查工具，可以检查代码中语法错误，代码风格是否规范，代码中是否包含一些不好的习惯!</p></blockquote><h5 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h5><blockquote><p>新建文件<code>.eslintrc.*</code> 位于项目的根目录中</p></blockquote><ul><li><code>.eslintrc</code></li><li><code>.eslintrc.js</code></li><li><code>.eslintrc.json</code></li></ul><p class="p red">配置格式步一样!</p><ul><li><code>package.json</code> 中 <code>eslintConfig</code>: 不需要创建文件,在原有文件基础上写!</li></ul><h5 id="具体配置"><a href="#具体配置" class="headerlink" title="具体配置"></a>具体配置</h5><p><strong><code>eslintrc.js</code>为例</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 解析选项</span></span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="comment">// es 版本 es6</span></span><br><span class="line">    <span class="attr">esmaVersion</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="comment">// es模块化</span></span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>,</span><br><span class="line">    <span class="comment">// es其他特性</span></span><br><span class="line">    <span class="attr">ecmaFeatures</span>: &#123;</span><br><span class="line">      <span class="attr">jsx</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 具体检查规则</span></span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;semi&quot;</span>: <span class="string">&quot;error&quot;</span>, <span class="comment">// 禁止使用分号</span></span><br><span class="line">    <span class="string">&quot;no-console&quot;</span>: <span class="string">&quot;off&quot;</span>, <span class="comment">// 开启console</span></span><br><span class="line">    <span class="string">&quot;no-unused-vars&quot;</span>: <span class="string">&quot;warn&quot;</span>, <span class="comment">// 禁止未使用变量</span></span><br><span class="line">    <span class="string">&quot;no-debugger&quot;</span>: <span class="string">&quot;off&quot;</span>, <span class="comment">// 开启debugger</span></span><br><span class="line">    <span class="string">&quot;array-callback-return&quot;</span>: <span class="string">&quot;warn&quot;</span>, <span class="comment">// 强调 数组 回调函数中 有 return 语句! 否则警告!</span></span><br><span class="line">    <span class="string">&quot;default-case&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;warn&quot;</span>, <span class="comment">// 要求 switch 语句中有 default 分支 否则警告!</span></span><br><span class="line">      &#123;<span class="attr">commentPattern</span>: <span class="string">&quot;no default&amp;&quot;</span>&#125; <span class="comment">// 允许在最后加注释`no default`,就不会有警告了!</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;eqequal&quot;</span>: <span class="string">&quot;error&quot;</span>, <span class="comment">// 禁止使用 == 和 !=&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 继承其他规则</span></span><br><span class="line">  <span class="attr">extends</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="在webpack中使用"><a href="#在webpack中使用" class="headerlink" title="在webpack中使用"></a>在<code>webpack</code>中使用</h5><blockquote><p>在<code>webpack</code>中使用 <code>ESlint</code> 需要插件 <code>eslint-webpack-plugin</code></p></blockquote><h5 id="安装eslint"><a href="#安装eslint" class="headerlink" title="安装eslint"></a>安装<code>eslint</code></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint eslint-webpack-plugin -D</span><br></pre></td></tr></table></figure><div class="note info flat"><p>如果在<code>vscode</code>中 可以通过 <code>ESlint</code> 插件 来在编写代码时及时反馈错误内容!</p></div><h5 id="创建-eslintrc-js-配置文件"><a href="#创建-eslintrc-js-配置文件" class="headerlink" title="创建.eslintrc.js 配置文件"></a>创建<code>.eslintrc.js</code> 配置文件</h5><p class="p red">在根目录中创建该文件!</p><p class="p blue">配置内容如下!</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>, <span class="comment">// 启用 node 中的全局变量</span></span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>, <span class="comment">// 启用浏览器中的全局变量</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 继承规则 eslint 官方规则</span></span><br><span class="line">  <span class="attr">extends</span>: [<span class="comment">/* &quot;plugin:vue/essential&quot;,  */</span><span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">6</span>, <span class="comment">// es6 syntax</span></span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>, <span class="comment">// es module</span></span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&quot;babel-eslint&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-console&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-debugger&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-var&quot;</span>: <span class="string">&quot;error&quot;</span>, <span class="comment">// 禁止使用 var 定义变量</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="在webpack配置文件中配置eslint插件"><a href="#在webpack配置文件中配置eslint插件" class="headerlink" title="在webpack配置文件中配置eslint插件"></a>在<code>webpack</code>配置文件中配置<code>eslint</code>插件</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// eslint配置</span></span><br><span class="line">      <span class="comment">// 解析  针对 src 目录下的文件进行规则校验</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">      <span class="attr">extensions</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;vue&quot;</span>],</span><br><span class="line">      <span class="comment">// 排除 node_modules</span></span><br><span class="line">      <span class="attr">exclude</span>: [<span class="string">&quot;node_modules&quot;</span>],</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="发现问题"><a href="#发现问题" class="headerlink" title="发现问题"></a>发现问题</h5><p><strong><code>版本问题</code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[webpack-cli] E:\my-project\webpack\data1\node_modules\eslint-webpack-plugin\node_modules\jest-worker\build\index.js:126</span><br><span class="line">      enableWorkerThreads: this._options.enableWorkerThreads ?? <span class="literal">false</span>,</span><br><span class="line">                                                              ^</span><br><span class="line"></span><br><span class="line">SyntaxError: Unexpected token ?</span><br></pre></td></tr></table></figure><blockquote><p>如果出现以上问题,请安装 <code>node 14</code> 以上版本!</p></blockquote><p><strong><code>打包后的 js 文件也会报错问题</code></strong></p><blockquote><p>关闭<code>eslint</code>对打包结果<code>检查规则</code>!<br>在根目录下新建<code>.eslintignore</code>文件`</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dist</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>内容添加<code>dist</code> 重新打包即可!</p></div><h4 id="babel支持js新语法"><a href="#babel支持js新语法" class="headerlink" title="babel支持js新语法"></a><code>babel</code>支持<code>js</code>新语法</h4><blockquote><p>主要用于将 <code>ES6 语法</code>编写的代码<code>转换为向后兼容的 JavaScript 语法</code>，以便<code>能够运行在当前和旧版本的浏览器或其他环境中</code>!</p></blockquote><h5 id="配置文件-1"><a href="#配置文件-1" class="headerlink" title="配置文件"></a>配置文件</h5><p class="p blue">配置文件有多种写法!</p><ol><li><code>babel.config.*</code><ul><li><code>babel.config.js</code></li><li><code>babe;.config.json</code></li></ul></li><li><code>.babelrc.*</code><ul><li><code>.babelrc</code></li><li><code>.babelrc.js</code></li><li><code>.babelrc.json</code></li></ul></li></ol><ul><li><code>package.json</code>中配置<code>babel</code> 不需要创建配置文件！</li></ul><h5 id="具体配置-1"><a href="#具体配置-1" class="headerlink" title="具体配置"></a>具体配置</h5><p><strong><code>babel.config.js</code></strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 预设</span></span><br><span class="line">  <span class="attr">presets</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><code>presets</code>预设</p><div class="note primary flat"><p>一组<code>Babel</code>插件,扩展<code>Babel</code>功能!</p><ul><li><code>@babel/preset-env</code>: 一个智能预设, 允许可以使用最新的<code>javascript</code>语法!</li><li><code>@babel/preset-react</code>: 一个预设, 用于处理<code>react-jsx</code>语法!</li><li><code>@babel/preset-typescript</code>: 一个预设, 用于处理<code>typescript</code>语法!</li></ul></div><h5 id="在-webpack中使用"><a href="#在-webpack中使用" class="headerlink" title="在 webpack中使用"></a>在 <code>webpack</code>中使用</h5><h5 id="安装-babel"><a href="#安装-babel" class="headerlink" title="安装 babel"></a>安装 <code>babel</code></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-loader @babel/core @babel/preset-env -D </span><br></pre></td></tr></table></figure><h5 id="配置-babel-loader"><a href="#配置-babel-loader" class="headerlink" title="配置 babel-loader"></a>配置 <code>babel-loader</code></h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置 babel-loader</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  <span class="comment">// 排除 node_modules 目录</span></span><br><span class="line">  <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">  <span class="attr">use</span>: &#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">    <span class="comment">// 也可以在 babel.config.js 中配置</span></span><br><span class="line">    <span class="comment">/* options: &#123;</span></span><br><span class="line"><span class="comment">      // 配置 babel 允许使用最新的 js 语法</span></span><br><span class="line"><span class="comment">      presets: [&quot;@babel/preset-env&quot;],</span></span><br><span class="line"><span class="comment">    &#125;, */</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h5 id="在-babel-config-js中配置"><a href="#在-babel-config-js中配置" class="headerlink" title="在 babel.config.js中配置"></a>在 <code>babel.config.js</code>中配置</h5><blockquote><p>在根目录新建<code>babel.config.js</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">presets</span>: [</span><br><span class="line">        [</span><br><span class="line">            <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">            <span class="comment">/* &#123;</span></span><br><span class="line"><span class="comment">                targets: &#123;</span></span><br><span class="line"><span class="comment">                    node: &#x27;current&#x27;</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">            &#125; */</span></span><br><span class="line">        ]</span><br><span class="line">    ],</span><br><span class="line">   <span class="comment">/*  plugins: [</span></span><br><span class="line"><span class="comment">        &#x27;@babel/plugin-proposal-class-properties&#x27;</span></span><br><span class="line"><span class="comment">    ] */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="处理html资源"><a href="#处理html资源" class="headerlink" title="处理html资源"></a>处理<code>html</code>资源</h3><blockquote><p>在<code>webpack</code>打包后<code>html</code>中<code>引入资源路径 每次都需要手动去改</code>比较麻烦! 因此需要通过<code>html-webpack-plugin</code>插件来处理!<br>例如: <code>src:</code> <code>&lt;script src=&quot;../dist/static/js/bundle.js&quot;&gt;&lt;/script&gt;</code><br><code>html-webpack-plugin</code> 可以帮我们自动引入<code>外部链接 link script...</code></p><h4 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install html-webpack-plugin -D</span><br></pre></td></tr></table></figure></blockquote><h4 id="在webpack-config-js中加入插件"><a href="#在webpack-config-js中加入插件" class="headerlink" title="在webpack.config.js中加入插件"></a>在<code>webpack.config.js</code>中加入插件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 如果不配置 template 打包后 原来 index.html 文件内容后丢失被替换成新的文件</span></span><br><span class="line">      <span class="comment">// 配置 index.html 模版 以这个模版文件生成新的 html 文件</span></span><br><span class="line">      <span class="comment">// 1. 不会改动 index.html 模版文件中的内容 2. 自动会引入打包静态资源路径!</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;public/index.html&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="修改文件输出路径"><a href="#修改文件输出路径" class="headerlink" title="修改文件输出路径"></a>修改文件输出路径</h2><h3 id="修改main-js入口文件到指定目录"><a href="#修改main-js入口文件到指定目录" class="headerlink" title="修改main.js入口文件到指定目录!"></a>修改<code>main.js</code>入口文件到指定目录!</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输出文件</span></span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">  <span class="attr">path</span>: outputPath,</span><br><span class="line">  <span class="attr">filename</span>: <span class="string">&quot;static/js/bundle.js&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="修改图片资源到指定目录"><a href="#修改图片资源到指定目录" class="headerlink" title="修改图片资源到指定目录"></a>修改<code>图片资源</code>到指定目录</h3><blockquote><p>在<code>model &gt; rules</code>下配置</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置图片资源</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|jpeg|gif|svg|eot|ttf|woff|woff2|png|ico)$/</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">    <span class="attr">parser</span>: &#123;</span><br><span class="line">      <span class="comment">// 配置解析 base64 当图片小于 10kb 转换为 base64 减少请求</span></span><br><span class="line">      <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">        <span class="comment">// 小于100kb的图片转base64</span></span><br><span class="line">        <span class="comment">// 优点: 减少请求数量 缺点: 体积会更大</span></span><br><span class="line">        <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">generator</span>: &#123;</span><br><span class="line">      <span class="comment">// 输出格式 [name]图片的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/image/[name].[hash:8][ext][query]&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h2 id="自动清空打包资源"><a href="#自动清空打包资源" class="headerlink" title="自动清空打包资源"></a>自动清空打包资源</h2><blockquote><p>每次打包后<code>自动将上一次打包结果清除!</code><br>在<code>webpack4</code>中需要插件<code>clear-webpack-plugin</code>来清空打包!</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输出文件</span></span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">  <span class="attr">path</span>: outputPath,</span><br><span class="line">  <span class="attr">filename</span>: <span class="string">&quot;static/js/bundle.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 在打包前 清空 dist目录 在生成打包新结果</span></span><br><span class="line">  <span class="attr">clean</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="搭建开发服务器"><a href="#搭建开发服务器" class="headerlink" title="搭建开发服务器"></a>搭建开发服务器</h2><blockquote><p>目前<code>webpack</code>每次打包后<code>需要手动刷新页面才能看到新的内容</code>,操作比较复杂, 因此需要搭建一个开发服务器!<br>通过<code>webpack-dev-server</code>插件来实现本地开发服务器，<code>当文件发生改变时，自动刷新页面，无需手动刷新页面!</code></p></blockquote><h3 id="安装插件-1"><a href="#安装插件-1" class="headerlink" title="安装插件"></a>安装插件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-dev-server -D</span><br></pre></td></tr></table></figure><h3 id="配置插件"><a href="#配置插件" class="headerlink" title="配置插件"></a>配置插件</h3><p><strong><code>webpack.config.js</code></strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>:  &#123;</span><br><span class="line">    <span class="comment">// 启动后 自动打开浏览器</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 开发服务器的端口</span></span><br><span class="line">    <span class="attr">port</span>: <span class="number">3000</span>,</span><br><span class="line">    <span class="comment">// 本地服务器地址</span></span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note waning flat"><p><code>dev-server</code> 服务启动后 <code>不会生成资源目录(dist)!</code> 它是在<code>内存中编译过程中生成</code>的!</p></div><h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack serve</span><br></pre></td></tr></table></figure><div class="note info flat"><p>也可以在<code>package.json</code>配置<code>scripts</code> 来执行次命令!</p></div><p><code>package.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx webpack serve&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx webpack&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev <span class="comment">#启动开发服务器</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build <span class="comment">#打包构建</span></span><br></pre></td></tr></table></figure><h2 id="生产模式"><a href="#生产模式" class="headerlink" title="生产模式"></a>生产模式</h2><blockquote><p>新建配置文件 <code>config/webpack.dev.js</code> 和 <code>config/webpack.prod.js</code></p></blockquote><p><code>webpack.dev.js</code></p><details class="folding-tag"><summary>webpack.dev.js</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// const outputPath = path.resolve(__dirname, &quot;dist&quot;);</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resovlePath</span> = (<span class="params">dir</span>) =&gt; path.<span class="title function_">resolve</span>(__dirname, dir);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 输出文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">// 开发模式下不需要 输出路径</span></span><br><span class="line">    <span class="comment">// path: outputPath,</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/bundle.js&quot;</span>,</span><br><span class="line">    <span class="comment">// 在打包前 清空 dist目录 在生成打包新结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置loader 解析 vue scss less ...</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;less-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;sass-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;stylus-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置图片资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|jpeg|gif|svg|eot|png|ico)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="comment">// 配置解析 base64 当图片小于 10kb 转换为 base64 减少请求</span></span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="comment">// 小于100kb的图片转base64</span></span><br><span class="line">            <span class="comment">// 优点: 减少请求数量 缺点: 体积会更大</span></span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// 输出格式 [name]图片的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/image/[name].[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置图标资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.ttf|woff|woff2?$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// 输出格式 [name]icon的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/fonts/[name].[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置 babel-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="comment">// 排除 node_modules 目录</span></span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          <span class="comment">// 也可以在 babel.config.js 中配置</span></span><br><span class="line">          <span class="comment">/* options: &#123;</span></span><br><span class="line"><span class="comment">            // 配置 babel 允许使用最新的 js 语法</span></span><br><span class="line"><span class="comment">            presets: [&quot;@babel/preset-env&quot;],</span></span><br><span class="line"><span class="comment">          &#125;, */</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置插件扩展 webpack 功能</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// eslint配置</span></span><br><span class="line">      <span class="comment">// 解析  针对 src 目录下的文件进行规则校验</span></span><br><span class="line">      <span class="attr">context</span>: <span class="title function_">resovlePath</span>(<span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">      <span class="attr">extensions</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;vue&quot;</span>],</span><br><span class="line">      <span class="comment">// 排除 node_modules</span></span><br><span class="line">      <span class="attr">exclude</span>: [<span class="string">&quot;node_modules&quot;</span>],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// html 处理资源引用路径 插件</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 如果不配置 template 打包后 原来 index.html 文件内容后丢失被替换成新的文件</span></span><br><span class="line">      <span class="comment">// 配置 index.html 模版 以这个模版文件生成新的 html 文件</span></span><br><span class="line">      <span class="comment">// 1. 不会改动 index.html 模版文件中的内容 2. 自动会引入打包静态资源路径!</span></span><br><span class="line">      <span class="attr">template</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 配置模式</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">// contentBase: outputPath,</span></span><br><span class="line">    <span class="comment">// 运行完事 自动打开浏览器窗口</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 本地服务 localhost</span></span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">    <span class="comment">// 本地端口 port</span></span><br><span class="line">    <span class="attr">port</span>: <span class="number">8080</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/* resolve: &#123;</span></span><br><span class="line"><span class="comment">    extensions: [&quot;.js&quot;, &quot;.vue&quot;, &quot;.json&quot;],</span></span><br><span class="line"><span class="comment">    alias: &#123;</span></span><br><span class="line"><span class="comment">      // 设置别名</span></span><br><span class="line"><span class="comment">      vue: &quot;vue/dist/vue.esm.js&quot;,</span></span><br><span class="line"><span class="comment">      &quot;@&quot;: path.resolve(__dirname, &quot;src&quot;),</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">  &#125;, */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><p><code>webpack.prod.js</code><br></p><details class="folding-tag"><summary>webpack.prod.js</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// const outputPath = path.resolve(__dirname, &quot;dist&quot;);</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resovlePath</span> = (<span class="params">dir</span>) =&gt; path.<span class="title function_">resolve</span>(__dirname, dir);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 输出文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/bundle.js&quot;</span>,</span><br><span class="line">    <span class="comment">// 在打包前 清空 dist目录 在生成打包新结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置loader 解析 vue scss less ...</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;less-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;sass-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;stylus-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置图片资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|jpeg|gif|svg|eot|png|ico)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="comment">// 配置解析 base64 当图片小于 10kb 转换为 base64 减少请求</span></span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="comment">// 小于100kb的图片转base64</span></span><br><span class="line">            <span class="comment">// 优点: 减少请求数量 缺点: 体积会更大</span></span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// 输出格式 [name]图片的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/image/[name].[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置图标资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.ttf|woff|woff2?$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// 输出格式 [name]icon的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/fonts/[name].[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置 babel-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="comment">// 排除 node_modules 目录</span></span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          <span class="comment">// 也可以在 babel.config.js 中配置</span></span><br><span class="line">          <span class="comment">/* options: &#123;</span></span><br><span class="line"><span class="comment">            // 配置 babel 允许使用最新的 js 语法</span></span><br><span class="line"><span class="comment">            presets: [&quot;@babel/preset-env&quot;],</span></span><br><span class="line"><span class="comment">          &#125;, */</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置插件扩展 webpack 功能</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// eslint配置</span></span><br><span class="line">      <span class="comment">// 解析  针对 src 目录下的文件进行规则校验</span></span><br><span class="line">      <span class="attr">context</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">extensions</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;vue&quot;</span>],</span><br><span class="line">      <span class="comment">// 排除 node_modules</span></span><br><span class="line">      <span class="attr">exclude</span>: [<span class="string">&quot;node_modules&quot;</span>],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// html 处理资源引用路径 插件</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 如果不配置 template 打包后 原来 index.html 文件内容后丢失被替换成新的文件</span></span><br><span class="line">      <span class="comment">// 配置 index.html 模版 以这个模版文件生成新的 html 文件</span></span><br><span class="line">      <span class="comment">// 1. 不会改动 index.html 模版文件中的内容 2. 自动会引入打包静态资源路径!</span></span><br><span class="line">      <span class="attr">template</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../public/index.html&quot;</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 配置模式</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">// contentBase: outputPath,</span></span><br><span class="line">    <span class="comment">// 运行完事 自动打开浏览器窗口</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 本地服务 localhost</span></span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">    <span class="comment">// 本地端口 port</span></span><br><span class="line">    <span class="attr">port</span>: <span class="number">8080</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/* resolve: &#123;</span></span><br><span class="line"><span class="comment">    extensions: [&quot;.js&quot;, &quot;.vue&quot;, &quot;.json&quot;],</span></span><br><span class="line"><span class="comment">    alias: &#123;</span></span><br><span class="line"><span class="comment">      // 设置别名</span></span><br><span class="line"><span class="comment">      vue: &quot;vue/dist/vue.esm.js&quot;,</span></span><br><span class="line"><span class="comment">      &quot;@&quot;: path.resolve(__dirname, &quot;src&quot;),</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">  &#125;, */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><p></p><div class="note danger flat"><p>注意: 在<code>webpack.dev.js</code>和<code>webpack.prod.js</code> 中我们需要将<code>path.resolve()</code>中的路径改为<code>.../xxx</code>上一级目录!<br>这是由于我们的配置文件分别放在了<code>config/xxxx.xx.xx</code>目录下, 而<code>path.resolve</code>是在当前目录下，也就是<code>config/xxxx.xx.xx</code>目录下，所以需要上一级目录<code>../</code>!</p></div><p><strong><code>配置package.json脚本</code></strong></p><p><code>通过 --config ./config/webpack.dev.js</code>来指定配置文件所在路径！</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx webpack serve --config ./config/webpack.dev.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx webpack --config ./config/webpack.prod.js&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><h3 id="提取css成单独文件"><a href="#提取css成单独文件" class="headerlink" title="提取css成单独文件"></a>提取<code>css</code>成单独文件</h3><div class="note info flat"><p><code>css</code>文件 会打包到<code>js</code>中，当<code>文件加载</code>时，会创建<code>style</code>标签来生成样式!<br><code>会出现闪屏问题</code>，我们应该是单独的<code>css</code>文件，通过<code>link</code>方式引入!</p></div><blockquote><p><code>css</code> 会通过 <code>loader</code>进行处理!<br><code>css</code> -&gt; <code>js</code> -&gt; <code>html[head标签中 ] 然后再输出-&gt; style</code></p></blockquote><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/front_end/webpack/css_file_extract.pic_1.jpg"><p class="p red">以上截图是打包后`style`标签位于 `head`</p><h4 id="安装包mini-css-extract-plugin-D"><a href="#安装包mini-css-extract-plugin-D" class="headerlink" title="安装包mini-css-extract-plugin -D"></a>安装包<code>mini-css-extract-plugin -D</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mini-css-extract-plugin -D</span><br></pre></td></tr></table></figure><h4 id="插件配置"><a href="#插件配置" class="headerlink" title="插件配置"></a>插件配置</h4><blockquote><p><code>style-loader</code> 我们需要将这个替换成<code>MiniCssExtractPlugin.loader</code><br><code>style-loader</code> 就是将<code>js</code>中到<code>css</code>输出到<code>html中&lt;style&gt;</code>, 所以要提取<code>css</code>文件到话可以注释掉!<br><code>通过注入&lt;style&gt;</code> _ <code>标记将CSS添加到DOM中</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 提取&lt;style&gt; 内链 样式 到 &lt;link&gt; 外链样式! </span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 指定输出目录</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details class="folding-tag"><summary>code webpack.prod.js</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// const outputPath = path.resolve(__dirname, &quot;dist&quot;);</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resovlePath</span> = (<span class="params">dir</span>) =&gt; path.<span class="title function_">resolve</span>(__dirname, dir);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 输出文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/bundle.js&quot;</span>,</span><br><span class="line">    <span class="comment">// 在打包前 清空 dist目录 在生成打包新结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置loader 解析 vue scss less ...</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">    +      <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="comment">// &quot;style-loader&quot;,</span></span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="comment">// 提取内联样式&lt;style&gt; 到单独文件 `&lt;link/&gt;&lt;/link&gt;`</span></span><br><span class="line">    +       <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="comment">// &quot;style-loader&quot;,</span></span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;less-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="comment">// 提取内联样式&lt;style&gt; 到单独文件 `&lt;link/&gt;&lt;/link&gt;`</span></span><br><span class="line">          <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="comment">// &quot;style-loader&quot;,</span></span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;sass-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="comment">// 提取内联样式&lt;style&gt; 到单独文件 `&lt;link/&gt;&lt;/link&gt;`</span></span><br><span class="line">  +        <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="comment">// &quot;style-loader&quot;,</span></span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          <span class="string">&quot;stylus-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置图片资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|jpeg|gif|svg|eot|png|ico)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="comment">// 配置解析 base64 当图片小于 10kb 转换为 base64 减少请求</span></span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="comment">// 小于100kb的图片转base64</span></span><br><span class="line">            <span class="comment">// 优点: 减少请求数量 缺点: 体积会更大</span></span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// 输出格式 [name]图片的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/image/[name].[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置图标资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.ttf|woff|woff2?$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// 输出格式 [name]icon的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/fonts/[name].[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置 babel-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="comment">// 排除 node_modules 目录</span></span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          <span class="comment">// 也可以在 babel.config.js 中配置</span></span><br><span class="line">          <span class="comment">/* options: &#123;</span></span><br><span class="line"><span class="comment">            // 配置 babel 允许使用最新的 js 语法</span></span><br><span class="line"><span class="comment">            presets: [&quot;@babel/preset-env&quot;],</span></span><br><span class="line"><span class="comment">          &#125;, */</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置插件扩展 webpack 功能</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// eslint配置</span></span><br><span class="line">      <span class="comment">// 解析  针对 src 目录下的文件进行规则校验</span></span><br><span class="line">      <span class="attr">context</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">extensions</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;vue&quot;</span>],</span><br><span class="line">      <span class="comment">// 排除 node_modules</span></span><br><span class="line">      <span class="attr">exclude</span>: [<span class="string">&quot;node_modules&quot;</span>],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// html 处理资源引用路径 插件</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 如果不配置 template 打包后 原来 index.html 文件内容后丢失被替换成新的文件</span></span><br><span class="line">      <span class="comment">// 配置 index.html 模版 以这个模版文件生成新的 html 文件</span></span><br><span class="line">      <span class="comment">// 1. 不会改动 index.html 模版文件中的内容 2. 自动会引入打包静态资源路径!</span></span><br><span class="line">      <span class="attr">template</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// 提取&lt;style&gt; 内链 样式 到 &lt;link&gt; 外链样式! </span></span><br><span class="line"> +   <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 指定输出目录</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div></details><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/front_end/webpack/css_file_extract.pic_2.jpg"><h3 id="postcss样式兼容性处理"><a href="#postcss样式兼容性处理" class="headerlink" title="postcss样式兼容性处理"></a><code>postcss</code>样式兼容性处理</h3><p><strong>需要安装的插件包</strong></p><blockquote><p><code>postcss-loader postcss postcss-preset-env</code></p></blockquote><h4 id="安装插件-2"><a href="#安装插件-2" class="headerlink" title="安装插件"></a>安装插件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss-loader postcss postcss-preset-env -D </span><br></pre></td></tr></table></figure><h4 id="配置postcss-loader"><a href="#配置postcss-loader" class="headerlink" title="配置postcss-loader"></a>配置<code>postcss-loader</code></h4><p><strong>在配置文件中配置<code>postcss-loader</code></strong></p><blockquote><p>在 <code>css scss styl less</code> - <code>loader</code>中配置<code>postcss-loader</code>!<br><code>module &gt; rules &gt; use &gt; css-loader</code> 同级下配置!</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置loader 解析 vue scss less ...</span></span><br><span class="line"> <span class="punctuation">&#123;</span></span><br><span class="line">  loader<span class="punctuation">:</span> <span class="string">&quot;postcss-loader&quot;</span><span class="punctuation">,</span></span><br><span class="line">  options<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    postcssOptions<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      plugins<span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;postcss-preset-env&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><details class="folding-tag"><summary>code webpack.prod.js</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// const outputPath = path.resolve(__dirname, &quot;dist&quot;);</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resovlePath</span> = (<span class="params">dir</span>) =&gt; path.<span class="title function_">resolve</span>(__dirname, dir);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 输出文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/bundle.js&quot;</span>,</span><br><span class="line">    <span class="comment">// 在打包前 清空 dist目录 在生成打包新结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置loader 解析 vue scss less ...</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="comment">// &quot;style-loader&quot;,</span></span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                <span class="attr">plugins</span>: [<span class="string">&quot;postcss-preset-env&quot;</span>],</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="comment">// 提取内联样式&lt;style&gt; 到单独文件 `&lt;link/&gt;&lt;/link&gt;`</span></span><br><span class="line">          <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="comment">// &quot;style-loader&quot;,</span></span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                <span class="comment">// 处理大多数样式兼容问题</span></span><br><span class="line">                <span class="attr">plugins</span>: [<span class="string">&quot;postcss-preset-env&quot;</span>],</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;less-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="comment">// 提取内联样式&lt;style&gt; 到单独文件 `&lt;link/&gt;&lt;/link&gt;`</span></span><br><span class="line">          <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="comment">// &quot;style-loader&quot;,</span></span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                <span class="attr">plugins</span>: [<span class="string">&quot;postcss-preset-env&quot;</span>],</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;sass-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">          <span class="comment">// 提取内联样式&lt;style&gt; 到单独文件 `&lt;link/&gt;&lt;/link&gt;`</span></span><br><span class="line">          <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">          <span class="comment">// &quot;style-loader&quot;,</span></span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                <span class="attr">plugins</span>: [<span class="string">&quot;postcss-preset-env&quot;</span>],</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;stylus-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置图片资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|jpeg|gif|svg|eot|png|ico)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="comment">// 配置解析 base64 当图片小于 10kb 转换为 base64 减少请求</span></span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="comment">// 小于100kb的图片转base64</span></span><br><span class="line">            <span class="comment">// 优点: 减少请求数量 缺点: 体积会更大</span></span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// 输出格式 [name]图片的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/image/[name].[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置图标资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.ttf|woff|woff2?$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// 输出格式 [name]icon的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/fonts/[name].[hash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置 babel-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="comment">// 排除 node_modules 目录</span></span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          <span class="comment">// 也可以在 babel.config.js 中配置</span></span><br><span class="line">          <span class="comment">/* options: &#123;</span></span><br><span class="line"><span class="comment">            // 配置 babel 允许使用最新的 js 语法</span></span><br><span class="line"><span class="comment">            presets: [&quot;@babel/preset-env&quot;],</span></span><br><span class="line"><span class="comment">          &#125;, */</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置插件扩展 webpack 功能</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// eslint配置</span></span><br><span class="line">      <span class="comment">// 解析  针对 src 目录下的文件进行规则校验</span></span><br><span class="line">      <span class="attr">context</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">extensions</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;vue&quot;</span>],</span><br><span class="line">      <span class="comment">// 排除 node_modules</span></span><br><span class="line">      <span class="attr">exclude</span>: [<span class="string">&quot;node_modules&quot;</span>],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// html 处理资源引用路径 插件</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 如果不配置 template 打包后 原来 index.html 文件内容后丢失被替换成新的文件</span></span><br><span class="line">      <span class="comment">// 配置 index.html 模版 以这个模版文件生成新的 html 文件</span></span><br><span class="line">      <span class="comment">// 1. 不会改动 index.html 模版文件中的内容 2. 自动会引入打包静态资源路径!</span></span><br><span class="line">      <span class="attr">template</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// 提取&lt;style&gt; 内链 样式 到 &lt;link&gt; 外链样式!</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 指定输出目录</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 配置模式</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">// contentBase: outputPath,</span></span><br><span class="line">    <span class="comment">// 运行完事 自动打开浏览器窗口</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 本地服务 localhost</span></span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">    <span class="comment">// 本地端口 port</span></span><br><span class="line">    <span class="attr">port</span>: <span class="number">8080</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div></details><h4 id="配置package-json"><a href="#配置package-json" class="headerlink" title="配置package.json"></a>配置<code>package.json</code></h4><blockquote><p>配置<code>browserslist</code> 浏览器版本!</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;ie &gt;= 8&quot;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;last 2 version&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;&gt; 1%&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;not dead&quot;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><blockquote><p><code>&quot;last 2 version&quot;</code> 所有浏览器最后两个版本!<br><code>&gt; 1%</code> 覆盖<code>99%</code>的浏览器版本! 冷门的浏览器不要了!<br><code>not dead</code> 不更新版本的浏览器也不需要!</p></blockquote><h3 id="封装loader配置"><a href="#封装loader配置" class="headerlink" title="封装loader配置"></a>封装<code>loader</code>配置</h3><blockquote><p>在<code>webpack.prod.js</code>中定义<code>getStyleLoader()</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getStyleLoader</span>(<span class="params"> pre = <span class="string">&#x27;&#x27;</span> </span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">    <span class="comment">// &quot;style-loader&quot;,</span></span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [<span class="string">&quot;postcss-preset-env&quot;</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    pre,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>使用</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(),</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">      <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">      <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">      <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="css压缩"><a href="#css压缩" class="headerlink" title="css压缩"></a><code>css压缩</code></h3><h4 id="安装插件-3"><a href="#安装插件-3" class="headerlink" title="安装插件"></a>安装插件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install css-minimizer-webpack-plugin -D</span><br></pre></td></tr></table></figure><h2 id="webpack-高级配置"><a href="#webpack-高级配置" class="headerlink" title="webpack 高级配置"></a><code>webpack</code> 高级配置</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img-blog.csdnimg.cn/27a66806ecb54546839d12d8456aa0e5.png" alt=""></p><h3 id="sourceMap"><a href="#sourceMap" class="headerlink" title="sourceMap"></a><code>sourceMap</code></h3><blockquote><p><code>SourceMap</code> (<code>源代码映射</code>)是一个用来<code>生成源代码与构建后代码一一映射的文件的方案</code>。它会生成一个 <code>xxx.map</code>文件，里面<code>包含源代码</code>和<code>构建后代码每一行</code>、<code>每一列的映射关系</code>。当<code>构建后代码出错了</code>，会通过<code>xxx.map</code> 文件，<code>从构建后代码出错位置找到映射后源代码出错位置，从而让浏览器提示源代码文件出错位置</code>，帮助我们更快的找到错误根源。</p></blockquote><p><strong><code>development</code></strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置模式</span></span><br><span class="line"><span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line"><span class="attr">devtool</span>: <span class="string">&quot;cheap-module-source-map&quot;</span>,</span><br></pre></td></tr></table></figure><p></p><p><strong><code>production</code></strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置模式</span></span><br><span class="line"><span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line"><span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br></pre></td></tr></table></figure><p></p><blockquote><p>在 <code>webpack.config.js</code> 中 <code>module.exports</code> 里面加一行</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span></span><br></pre></td></tr></table></figure><p><code>devtool</code>有很多<code>source-map</code>形式，详情见<code>webpack</code>手册<code>devtool</code>部分</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img-blog.csdnimg.cn/20200607182716314.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1Y2t5emhvdWZhbmdiaW5n,size_16,color_FFFFFF,t_70" alt=""></p><a class="tag-Link" target="_blank" href="https://blog.csdn.net/formylovetm/article/details/126095387"><div class="tag-link-tips">引用站外地址</div><div class="tag-link-bottom"><div class="tag-link-left" style="background-image:url(https://www.msirknightblog.cn/static/images/site/avatar.jpg)"></div><div class="tag-link-right"><div class="tag-link-title">sourceMap</div><div class="tag-link-sitename">https://blog.csdn.net/formylovetm/article/details/126095387</div></div><i class="fa-solid fa-angle-right"></i></div></a><h3 id="HMR"><a href="#HMR" class="headerlink" title="HMR"></a><code>HMR</code></h3><div class="note primary flat"><p><code>HotModuleReplacement</code> (<code>HMR/热模块替换</code>): 在程序运行中，替换、添加或删除模块，而<code>无需重新加载整个页面</code>。</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="comment">// contentBase: outputPath,</span></span><br><span class="line">  <span class="comment">// 运行完事 自动打开浏览器窗口</span></span><br><span class="line">  <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 本地服务 localhost</span></span><br><span class="line">  <span class="attr">host</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">  <span class="comment">// 本地端口 port</span></span><br><span class="line">  <span class="attr">port</span>: <span class="number">8080</span>,</span><br><span class="line">  <span class="comment">// 热更新 只需要更新当前更改的模块!</span></span><br><span class="line">  <span class="attr">hot</span>: <span class="literal">true</span> </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><div class="note warning flat"><p>注意: <code>css</code> 方面 <code>style-loader</code>对<code>HRM</code>做了相关处理, 但是<code>js</code>方面是不行的! 如果是开发<code>vue</code>中<code>vue-loader</code>是做了<code>HRM</code>处理的!</p></div><p>不过<code>js</code>也可以这么处理<br><code>main.js</code>中<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>( <span class="variable language_">module</span>.<span class="property">hot</span> )&#123;</span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&#x27;./js/count.js&#x27;</span>);</span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&#x27;./App.vue&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件发生了变化!&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="OneOf"><a href="#OneOf" class="headerlink" title="OneOf"></a><code>OneOf</code></h3><blockquote><p>放在<code>oneOf</code>代码块中的 <code>loader</code> <code>只会匹配一个</code>,避免<code>每一个文件</code>在<code>打包时每个loader都要过一遍</code>。<br><code>注意:</code>不能有两项配置处理同一种类型的文件<br><code>例如:</code>js文件的语法检查和兼容性处理，不能放在同一个oneOf中。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">oneOf</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(<span class="string">&quot;less-loader&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(<span class="string">&quot;sass-loader&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(<span class="string">&quot;stylus-loader&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置 babel-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="comment">// 排除 node_modules 目录</span></span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          <span class="comment">// 也可以在 babel.config.js 中配置</span></span><br><span class="line">          <span class="comment">/* options: &#123;</span></span><br><span class="line"><span class="comment">            // 配置 babel 允许使用最新的 js 语法</span></span><br><span class="line"><span class="comment">            presets: [&quot;@babel/preset-env&quot;],</span></span><br><span class="line"><span class="comment">          &#125;, */</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="include-包函-和-exclude-排除"><a href="#include-包函-和-exclude-排除" class="headerlink" title="include(包函) 和 exclude(排除)"></a><code>include(包函)</code> 和 <code>exclude(排除)</code></h3><div class="note primary flat"><p>开发时我们需要使用第三方的库或插件，所有文件都下载到 <code>node_modules</code> 中了。而<code>这些文件是不需要编译可以直接使用的。</code><br>所以我们在对<code>js</code>文件处理时，要<code>排除 node _modules 下面的文件.</code></p></div><ul><li><code>include</code> 只处理<code>包含</code>中的文件!</li><li><code>exclude</code> 排除<code>不需要</code>中的文件!`</li></ul><p class="p red">注意: 这两种方式只能写一个 要么 include 要么exclude!</p><p><code>babel-loader</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置 babel-loader</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    <span class="comment">// 排除 node_modules 目录</span></span><br><span class="line">    <span class="comment">// exclude: /node_modules/,</span></span><br><span class="line">    <span class="comment">// 只处理 src 目录下的文件</span></span><br><span class="line">    <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>),</span><br><span class="line">    <span class="attr">use</span>: &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      <span class="comment">// 也可以在 babel.config.js 中配置</span></span><br><span class="line">      <span class="comment">/* options: &#123;</span></span><br><span class="line"><span class="comment">        // 配置 babel 允许使用最新的 js 语法</span></span><br><span class="line"><span class="comment">        presets: [&quot;@babel/preset-env&quot;],</span></span><br><span class="line"><span class="comment">      &#125;, */</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p><code>eslint</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">    <span class="comment">// eslint配置</span></span><br><span class="line">    <span class="comment">// 解析  针对 src 目录下的文件进行规则校验</span></span><br><span class="line">    <span class="attr">context</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../src&quot;</span>),</span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;vue&quot;</span>],</span><br><span class="line">    <span class="comment">// 排除 node_modules</span></span><br><span class="line">    <span class="attr">exclude</span>: [<span class="string">&quot;node_modules&quot;</span>],</span><br><span class="line">  &#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="cache-缓存"><a href="#cache-缓存" class="headerlink" title="cache 缓存"></a><code>cache</code> 缓存</h3><div class="note primary flat"><p>每次打包时 <code>js</code> 文件都要经过 <code>Eslint</code> 检查 和 <code>Babel</code> 编译，速度比较慢我们可以缓存之前的 <code>Eslint</code> 检查和 <code>Babel</code>编译结果，<code>这样第二次打包时速度就会更快了</code>!</p></div><p><code>babel-loader</code><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置 babel-loader</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    <span class="comment">// 排除 node_modules 目录</span></span><br><span class="line">    <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">    <span class="attr">use</span>: &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      <span class="comment">// 也可以在 babel.config.js 中配置</span></span><br><span class="line">      <span class="comment">/* options: &#123;</span></span><br><span class="line"><span class="comment">        // 配置 babel 允许使用最新的 js 语法</span></span><br><span class="line"><span class="comment">        presets: [&quot;@babel/preset-env&quot;],</span></span><br><span class="line"><span class="comment">      &#125;, */</span></span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// 开启 babel 缓存</span></span><br><span class="line">        <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// 关闭缓存文件压缩</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><br><code>eslint</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">  <span class="comment">// eslint配置</span></span><br><span class="line">  <span class="comment">// 解析  针对 src 目录下的文件进行规则校验</span></span><br><span class="line">  <span class="attr">context</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../src&quot;</span>),</span><br><span class="line">  <span class="attr">extensions</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;vue&quot;</span>],</span><br><span class="line">  <span class="comment">// 排除 node_modules</span></span><br><span class="line">  <span class="attr">exclude</span>: [<span class="string">&quot;node_modules&quot;</span>],</span><br><span class="line">  <span class="comment">// 开启缓存</span></span><br><span class="line">  <span class="attr">cache</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 缓存目录</span></span><br><span class="line">  <span class="attr">cacheLocation</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../node_modules/.cache/eslint&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><h3 id="多进程打包"><a href="#多进程打包" class="headerlink" title="多进程打包"></a>多进程打包</h3><div class="note primary flat"><p>当项目越来越庞大时，打包速度越来越慢，甚至于需要一个下午才能打包出来代码。这个速度是比较慢的。<br>我们想要继续提升打包速度，其实就是要提升js 的打包速度，因为其他文件都比较少。<br>而对js 文件处理主要就是 <code>eslint、babel、Terser</code> 三个工具，所以我们要提升它们的运行速度.<br>我们可以开启<code>多进程同时处理js</code> 文件，这样速度就比之前的单进程打包更快了.</p></div><div class="note info flat"><p>多进程打包: 开启电脑的多个进程同时干一件事，速度更快。需要注意: <code>请仅在特别耗时的操作中使用，因为每个进程启动就有大约为 600ms 左右开销,</code></p></div><p><strong><code>安装插件</code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install thread-loader -D</span><br></pre></td></tr></table></figure><p><strong><code>使用插件</code></strong></p><details class="folding-tag"><summary>折叠: 配置多进程打包</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取 cpu 线程数量</span></span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"><span class="comment">// js压缩插件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// css 压缩插件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerWepackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">// 配置 babel-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="comment">// 排除 node_modules 目录</span></span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// 给 babel 处理开启多线程</span></span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;thread-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="comment">// 线程数量</span></span><br><span class="line">              <span class="attr">works</span>: threads,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">            <span class="comment">// 也可以在 babel.config.js 中配置</span></span><br><span class="line">            <span class="comment">/* options: &#123;</span></span><br><span class="line"><span class="comment">              // 配置 babel 允许使用最新的 js 语法</span></span><br><span class="line"><span class="comment">                presets: [&quot;@babel/preset-env&quot;],</span></span><br><span class="line"><span class="comment">              &#125;, */</span></span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// 开启 babel 缓存</span></span><br><span class="line">              <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// 关闭缓存文件压缩</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// eslint配置</span></span><br><span class="line">      <span class="comment">// 解析  针对 src 目录下的文件进行规则校验</span></span><br><span class="line">      <span class="attr">context</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../src&quot;</span>),</span><br><span class="line">      <span class="attr">extensions</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;vue&quot;</span>],</span><br><span class="line">      <span class="comment">// 排除 node_modules</span></span><br><span class="line">      <span class="attr">exclude</span>: [<span class="string">&quot;node_modules&quot;</span>],</span><br><span class="line">      <span class="comment">// 开启缓存</span></span><br><span class="line">      <span class="attr">cache</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">cacheLocation</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../node_modules/.cache/eslint&quot;</span>),</span><br><span class="line">      <span class="comment">// 开启多线程</span></span><br><span class="line">      threads</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// css压缩</span></span><br><span class="line">    <span class="comment">/* new CssMinimizerWepackPlugin(),</span></span><br><span class="line"><span class="comment">    new TerserWebpackPlugin(&#123;</span></span><br><span class="line"><span class="comment">      parallel: threads, // 开启多进程</span></span><br><span class="line"><span class="comment">    &#125;) */</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 优化相关配置</span></span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="comment">// 压缩配置</span></span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="comment">// 压缩 css</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerWepackPlugin</span>(),</span><br><span class="line">      <span class="comment">// js 压缩配置多线程</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserWebpackPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">parallel</span>: threads,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></details><h3 id="减少代码体积"><a href="#减少代码体积" class="headerlink" title="减少代码体积"></a>减少代码体积</h3><h4 id="tree-shaking"><a href="#tree-shaking" class="headerlink" title="tree-shaking"></a><code>tree-shaking</code></h4><div class="note primary flat"><p><code>Tree Shaking</code> 是一个术语，通常用于描述移除 <code>JavaScript</code> 中的<code>没有使用上的代码</code>!</p></div><p class="p red">它依赖于 ES Module 的静态分析能力，所以需要使用 ES Module 的代码才能使用 Tree Shaking!</p><p class="p blue">webpack 已经默认这个功能，无需配置!</p><h4 id="babel生成文件的体积"><a href="#babel生成文件的体积" class="headerlink" title="babel生成文件的体积"></a><code>babel</code>生成文件的体积</h4><div class="note primary flat"><p><code>Babel</code> 为编译的每个文件都<code>插入了辅助代码</code>，<code>使代码体积过大!</code><br><code>Babel</code> 对一些公共方法使用了非常小的辅助代码，比如<code>_extend</code>默认情况下会被添加到每一个需要它的文件中 。<br>你可以将这些辅助代码作为一个独立模块，来避免重复引入。</p></div><p><code>@babel/plugin-transform-runtime</code> :禁用了 <code>Babel</code> 自动对每个文件的 <code>runtime</code> 注入，而是引入<code>@babel/plugin-transform-runtime</code>并且使所有辅助代码从这里引用。</p><p><strong><code>安装插件</code></strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/plugin-transform-runtime -D</span><br></pre></td></tr></table></figure><p></p><p><strong><code>使用插件</code></strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">  <span class="comment">// 也可以在 babel.config.js 中配置</span></span><br><span class="line">  <span class="comment">/* options: &#123;</span></span><br><span class="line"><span class="comment">    // 配置 babel 允许使用最新的 js 语法</span></span><br><span class="line"><span class="comment">      presets: [&quot;@babel/preset-env&quot;],</span></span><br><span class="line"><span class="comment">    &#125;, */</span></span><br><span class="line">  <span class="attr">options</span>: &#123;</span><br><span class="line">    <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">// 开启 babel 缓存</span></span><br><span class="line">    <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// 关闭缓存文件压缩</span></span><br><span class="line">    <span class="comment">// 减少打包体积 babel 默认情况下会注入 重复定义的辅助代码 因此将重复定义的代码提取公用模块</span></span><br><span class="line">    <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p></p><h3 id="图片压缩"><a href="#图片压缩" class="headerlink" title="图片压缩"></a>图片压缩</h3><div class="note danger flat"><p><code>图片压缩</code> _ <code>只能针对本地静态文件进行压缩!</code></p></div><h4 id="安装插件-4"><a href="#安装插件-4" class="headerlink" title="安装插件"></a>安装插件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i image-minimizer-webpack-plugin imagemin -D</span><br></pre></td></tr></table></figure><p><code>无损压缩</code><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo -D</span><br></pre></td></tr></table></figure><p></p><h4 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ImageMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;image-minimizer-webpack-plugin&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// ... 其他webpack配置</span></span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimize</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ImageMinimizerPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">minimizer</span>: &#123;</span><br><span class="line">        <span class="attr">implementation</span>: <span class="title class_">ImageMinimizerPlugin</span>.<span class="property">imageminMinify</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="comment">// 这里是`imagemin`插件的配置选项</span></span><br><span class="line">          <span class="comment">// 例如，你可以设置压缩质量、格式等</span></span><br><span class="line">          <span class="comment">// 详细的选项列表请查看 https://github.com/imagemin/imagemin</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 包含（或排除）文件</span></span><br><span class="line">      <span class="attr">include</span>: <span class="regexp">/\.(jpe?g|png|gif|svg|webp)$/i</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="CodeSplit代码分割"><a href="#CodeSplit代码分割" class="headerlink" title="CodeSplit代码分割"></a><code>CodeSplit</code>代码分割</h3><div class="note primary flat"><p><code>打包代码时会将所有 js 文件打包到一个文件中，体积太大了</code>。我们如果<code>只要渲染首页，就应该只加载首页的 js 文件，其他文件不应该加载。</code><br>所以我们需要<code>将打包生成的文件进行代码分割</code>，<code>生成多个 js 文件</code>，<code>渲染哪个页面就只加载某个 js 文件</code>，这样加载的资源就少，速度就更快。</p></div><ul><li><code>分割文件</code>：将打包生成的文件<code>进行分割</code>，<code>生成多个 js 文件。</code></li><li><code>按需加载</code>：<code>需要哪个文件就加载哪个文件。</code></li></ul><p><strong><code>安装插件</code></strong><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack webpack-cli html-webpack-plugin -D</span><br></pre></td></tr></table></figure><p></p><h4 id="多入口文件配置"><a href="#多入口文件配置" class="headerlink" title="多入口文件配置"></a>多入口文件配置</h4><blockquote><p><code>app</code> 与 <code>src/app.js</code>相对应!<br><code>main</code> 与 <code>src/main.js</code>相对应!<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">entry</span>: &#123;</span><br><span class="line">  <span class="attr">app</span>: <span class="string">&quot;./src/app.js&quot;</span>,</span><br><span class="line">  <span class="attr">main</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">├── package-lock.json</span><br><span class="line">├── package.json</span><br><span class="line">├── public</span><br><span class="line">│   └── index.html</span><br><span class="line">├── src</span><br><span class="line">│   ├── app.js</span><br><span class="line">│   └── main.js</span><br><span class="line">└── webpack.config.js</span><br></pre></td></tr></table></figure><div class="tabs" id="多入口文件配置"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#多入口文件配置-1">src/app.js</button></li><li class="tab"><button type="button" data-href="#多入口文件配置-2">src/main.js</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="多入口文件配置-1"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./main&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;file app.js&quot;</span> + result);</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="多入口文件配置-2"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;file main.js&quot;</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">...args</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> args.<span class="title function_">reduce</span>(<span class="function">(<span class="params">c,p</span>) =&gt;</span> c+=p, <span class="number">0</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p><strong><code>webpack.config.js</code></strong><br></p><details class="folding-tag"><summary>webpack.config.js</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="comment">// 配置单入口文件</span></span><br><span class="line">  <span class="comment">// entry: &quot;./src/main.js&quot;,</span></span><br><span class="line">  <span class="comment">// 配置多入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">app</span>: <span class="string">&quot;./src/app.js&quot;</span>,</span><br><span class="line">    <span class="attr">main</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="comment">// [name] webpack 命名方式 name 为文件本身的名字</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/[name].js&quot;</span>,</span><br><span class="line">    <span class="comment">// 每次打包后清空</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 指定 html 模版</span></span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><p></p><div class="note info flat"><p>[name]是<code>webpack命名规则</code>，使用<code>chunk</code>的<code>name</code>作为输出的文件名。<br>什么是<code>chunk</code>？<code>打包的资源</code>就是<code>chunk</code>，<code>输出出去叫bundle</code>。<br><code>chunk</code>的<code>name</code>是啥呢？ 比如： <code>entry</code>中<code>xxx: &quot;./src/xxx.js&quot;</code>, <code>name</code>就是<code>xxx</code>。注意是前面的<code>xxx</code>，和文件名无关。<br>为什么需要这样命名呢？如果还是之前写法<code>main.js</code>，<code>那么打包生成两个js文件都会叫做main.js会发生覆盖。</code>(<code>实际上会直接报错的</code>)</p></div><h4 id="提取重复代码"><a href="#提取重复代码" class="headerlink" title="提取重复代码"></a>提取重复代码</h4><div class="note primary flat"><p>如果<code>多入口文件中都引用了同一份代码</code>，我们<code>不希望这份代码被打包到两个文件中</code>，<code>导致代码重复，体积更大。</code><br>我们<code>需要提取多入口的重复代码</code>，<code>只打包生成一个 js 文件</code>，其他文件引用它就好。</p></div><p><strong>新建<code>src/utils/math.js</code>文件</strong><br></p><div class="tabs" id="多入口文件配置"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#多入口文件配置-1">src/math.js</button></li><li class="tab"><button type="button" data-href="#多入口文件配置-2">src/app.js</button></li><li class="tab"><button type="button" data-href="#多入口文件配置-3">src/main.js</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="多入口文件配置-1"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> args.<span class="title function_">reduce</span>(<span class="function">(<span class="params">c, p</span>) =&gt;</span> (c += p), <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="多入口文件配置-2"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 和 app.js 同时引用了 math中的 sum方法</span></span><br><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./utils/math&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;file app.js&quot;</span> + result);</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="多入口文件配置-3"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 和 app.js 同时引用了 math中的 sum方法</span></span><br><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./utils/math&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;file main.js&quot;</span> + result);</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p></p><h4 id="配置optimization优化项"><a href="#配置optimization优化项" class="headerlink" title="配置optimization优化项"></a>配置<code>optimization</code>优化项</h4><blockquote><p>添加 <code>optimization &gt; splitChunks</code> 代码分割配置</p></blockquote><details class="folding-tag"><summary>webpack.config.js</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 优化项</span></span><br><span class="line"><span class="attr">optimization</span>: &#123;</span><br><span class="line">  <span class="comment">// 代码分割配置</span></span><br><span class="line">  <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">    <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>, <span class="comment">// 对所有模块都进行分割</span></span><br><span class="line">    <span class="comment">// 以下是默认值</span></span><br><span class="line">    <span class="comment">// minSize: 20000, // 分割代码最小的大小</span></span><br><span class="line">    <span class="comment">// minRemainingSize: 0, // 类似于minSize，最后确保提取的文件大小不能为0</span></span><br><span class="line">    <span class="comment">// minChunks: 1, // 至少被引用的次数，满足条件才会代码分割</span></span><br><span class="line">    <span class="comment">// maxAsyncRequests: 30, // 按需加载时并行加载的文件的最大数量</span></span><br><span class="line">    <span class="comment">// maxInitialRequests: 30, // 入口js文件最大并行请求数量</span></span><br><span class="line">    <span class="comment">// enforceSizeThreshold: 50000, // 超过50kb一定会单独打包（此时会忽略minRemainingSize、maxAsyncRequests、maxInitialRequests）</span></span><br><span class="line">    <span class="comment">// cacheGroups: &#123; // 组，哪些模块要打包到一个组</span></span><br><span class="line">    <span class="comment">//   defaultVendors: &#123; // 组名</span></span><br><span class="line">    <span class="comment">//     test: /[\\/]node_modules[\\/]/, // 需要打包到一起的模块</span></span><br><span class="line">    <span class="comment">//     priority: -10, // 权重（越大越高）</span></span><br><span class="line">    <span class="comment">//     reuseExistingChunk: true, // 如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块</span></span><br><span class="line">    <span class="comment">//   &#125;,</span></span><br><span class="line">    <span class="comment">//   default: &#123; // 其他没有写的配置会使用上面的默认值</span></span><br><span class="line">    <span class="comment">//     minChunks: 2, // 这里的minChunks权重更大</span></span><br><span class="line">    <span class="comment">//     priority: -20,</span></span><br><span class="line">    <span class="comment">//     reuseExistingChunk: true,</span></span><br><span class="line">    <span class="comment">//   &#125;,</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    <span class="comment">// 修改配置</span></span><br><span class="line">    <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">      <span class="comment">// 默认配置</span></span><br><span class="line">      <span class="comment">// 组，哪些模块要打包到一个组</span></span><br><span class="line">      <span class="comment">// defaultVendors: &#123; // 组名</span></span><br><span class="line">      <span class="comment">//   test: /[\\/]node_modules[\\/]/, // 需要打包到一起的模块</span></span><br><span class="line">      <span class="comment">//   priority: -10, // 权重（越大越高）</span></span><br><span class="line">      <span class="comment">//   reuseExistingChunk: true, // 如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块</span></span><br><span class="line">      <span class="comment">// &#125;,</span></span><br><span class="line">      <span class="attr">default</span>: &#123;</span><br><span class="line">        <span class="comment">// 其他没有写的配置会使用上面的默认值</span></span><br><span class="line">        <span class="attr">minSize</span>: <span class="number">0</span>, <span class="comment">// 我们定义的文件体积太小了，所以要改打包的最小文件体积</span></span><br><span class="line">        <span class="attr">minChunks</span>: <span class="number">2</span>, <span class="comment">// 多入口配置中引用了同一个文件，只有大于等于2次才会被打包 单入口不需要</span></span><br><span class="line">        <span class="attr">priority</span>: -<span class="number">20</span>,</span><br><span class="line">        <span class="attr">reuseExistingChunk</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></details><blockquote><p><code>cacheGroups &gt; default</code> 配置会覆盖 <code>splitChunks</code>配置<br>打包后,此时我们会发现生成 <code>3 个 js 文件</code>，其中有一个就是<code>提取的公共模块</code>。</p></blockquote><h4 id="按需加载"><a href="#按需加载" class="headerlink" title="按需加载"></a>按需加载</h4><blockquote><p><code>import(&quot;./utils/count&quot;);</code> 通过<code>import()</code> 函数实现按需加载。<br>按需加载<code>当我需要这个模块时</code>去<code>import</code>动态加载这个模块<br>而不是<code>一开始我就要加载这个模块</code>!</p></blockquote><div class="note danger flat"><p>如果<code>动态导入 import</code> <code>eslint</code> 报错时可以加以下配置!</p></div><p><code>.eslintrc.js</code><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">   <span class="attr">plugins</span>: [<span class="string">&quot;import&quot;</span>] <span class="comment">// 解决动态导入import语法报错问题 --&gt; 实际使用eslint-plugin-import的规则解决的</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>新建<code>src/utils/count.js</code>文件</strong><br></p><div class="tabs" id="多入口文件配置"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#多入口文件配置-1">src/count.js</button></li><li class="tab"><button type="button" data-href="#多入口文件配置-2">src/app.js</button></li><li class="tab"><button type="button" data-href="#多入口文件配置-3">src/main.js</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="多入口文件配置-1"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">count</span>(<span class="params">x, y</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="多入口文件配置-2"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 和 app.js 同时引用了 math中的 sum方法</span></span><br><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./utils/math&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;file app.js&quot;</span> + result);</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="多入口文件配置-3"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 和 app.js 同时引用了 math中的 sum方法</span></span><br><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./utils/math&quot;</span>;</span><br><span class="line"><span class="comment">// import &#123; count &#125; from &quot;./utils/count&quot;;</span></span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;file main.js&quot;</span> + result);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// const countResult = count(1, 2);</span></span><br><span class="line">    <span class="comment">// 通过此方式可实现懒加载，当点击的时候 去动态倒入 count 文件</span></span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">import</span>(<span class="string">&quot;./utils/count&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="title function_">count</span>(<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p></p><h3 id="单文件相关配置"><a href="#单文件相关配置" class="headerlink" title="单文件相关配置"></a>单文件相关配置</h3><h4 id="splitChunk"><a href="#splitChunk" class="headerlink" title="splitChunk"></a><code>splitChunk</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">optimization</span>: &#123;</span><br><span class="line">  <span class="comment">// 代码分割配置</span></span><br><span class="line">  <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">    <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>, <span class="comment">// 对所有模块都进行分割</span></span><br><span class="line">    <span class="comment">// 其他配置项默认即可</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="给模块命名"><a href="#给模块命名" class="headerlink" title="给模块命名"></a><code>给模块命名</code></h4><blockquote><p>通过此 <code>webpackChunkName: &quot;name&quot;</code> 来设置打包后的文件名!</p></blockquote><div class="note primary flat"><p><code>import(/*webpackChunkName: &quot;name&quot; */ &quot;./js/math&quot;)</code></p></div><p><strong><code>main.js</code></strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">import</span>(<span class="comment">/* webpackChunkName: &quot;count&quot; */</span> <span class="string">&quot;./utils/count&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="title function_">count</span>(<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><strong><code>在webpack.config.js</code>中配置</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">   <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">   <span class="comment">// [name] webpack 命名方式 name 为文件本身的名字</span></span><br><span class="line">   <span class="attr">filename</span>: <span class="string">&quot;static/js/[name].js&quot;</span>,</span><br><span class="line">   <span class="comment">// [name] webpack 结合 /* webpackChunkName: &quot;name&quot; */ 命名方式</span></span><br><span class="line">   <span class="attr">chunkFilename</span>: <span class="string">&quot;static/js/[name].js&quot;</span>,</span><br><span class="line">   <span class="comment">// 每次打包后清空</span></span><br><span class="line">   <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p></p><h4 id="统一命名"><a href="#统一命名" class="headerlink" title="统一命名"></a><code>统一命名</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>), <span class="comment">// 生产模式需要输出</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/[name].js&quot;</span>, <span class="comment">// 入口文件(main.js)打包输出资源命名方式</span></span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">      chunkFilename 动态导入()输出资源命名方式</span></span><br><span class="line"><span class="comment">        import(* webpackChunkName: &quot;math&quot; * &quot;../src/js/math&quot;)</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&quot;static/js/[name].chunk.js&quot;</span>, <span class="comment">// 动态导入输出资源命名方式</span></span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">      图片和其他资源</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&quot;static/media/[name].[hash][ext]&quot;</span>, <span class="comment">// 图片、字体等资源命名方式（注意用hash）</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 提取&lt;style&gt; 内链 样式 到 &lt;link&gt; 外链样式!</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 指定输出目录</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/[name].css&quot;</span>,</span><br><span class="line">      <span class="comment">// chunkFilename: &quot;static/css/[name].css&quot;,</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="preload-和-prefetch"><a href="#preload-和-prefetch" class="headerlink" title="preload 和 prefetch"></a><code>preload</code> 和 <code>prefetch</code></h4><blockquote><p><code>preload</code> 和 <code>prefetch</code> 都是<code>预加载</code>，但是<code>preload</code> 是<code>提前加载</code>，<code>prefetch</code> 是<code>延后加载</code>。</p></blockquote><div class="note info flat"><p>我们前面已经做了<code>代码分割</code>，同时会<code>使用 import 动态导入</code>语法来进行代码<code>按需加载</code>（我们也叫<code>懒加载</code>，比如<code>路由懒加载</code>就是这样实现的）。<br>但<code>是加载速度还不够好</code>，比如：<code>是用户点击按钮时才加载这个资源的，如果资源体积很大，那么用户会感觉到明显卡顿效果。</code><br>我们想在浏览器空闲时间，加载后续需要使用的资源。我们就需要用上 <code>Preload</code> 或 <code>Prefetch</code> 技术。</p></div><ul><li><code>Preload</code>：告诉浏览器<code>立即加载</code>资源。</li><li><code>Prefetch</code>：告诉浏览器在<code>空闲时才开始加载</code>资源。</li></ul><blockquote><p><code>都只会加载资源，并不执行。</code><br><code>都有缓存。</code><br><code>Preload</code>: 加载<code>优先级高</code>，<code>Prefetch</code>: 加载<code>优先级低</code>。<br><code>Preload</code>: <code>只能加载当前页面需要使用的资源</code>，<code>Prefetch</code>: <code>可以加载当前页面资源</code>，<code>也可以加载下一个页面需要使用的资源</code>。<br><code>当前页面</code>优先级高的资源用 <code>Preload</code> 加载。<br><code>下一个页面</code>需要使用的资源用 <code>Prefetch</code> 加载。</p></blockquote><p class="p red">注意: Preload 相对于 Prefetch 兼容性好一点。</p><p><strong><code>安装包</code></strong><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @vue/preload-webpack-plugin -D</span><br></pre></td></tr></table></figure><br><strong><code>webpack.config.js</code></strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">PreloadWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;@vue/preload-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">PreloadWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">rel</span>: <span class="string">&quot;preload&quot;</span>, <span class="comment">// 默认值rel: &quot;preload&quot;, // preload兼容性更好</span></span><br><span class="line">      <span class="attr">as</span>: <span class="string">&quot;script&quot;</span>,</span><br><span class="line">      <span class="comment">// rel: &#x27;prefetch&#x27; // prefetch兼容性更差</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><a class="tag-Link" target="_blank" href="https://yk2012.github.io/sgg_webpack5/senior/optimizePerformance.html#preload-prefetch"><div class="tag-link-tips">引用站外地址</div><div class="tag-link-bottom"><div class="tag-link-left" style="background-image:url(https://www.msirknightblog.cn/static/images/site/avatar.jpg)"></div><div class="tag-link-right"><div class="tag-link-title">Preload / Prefetch</div><div class="tag-link-sitename">https://yk2012.github.io/sgg_webpack5/senior/optimizePerformance.html#preload-prefetch</div></div><i class="fa-solid fa-angle-right"></i></div></a><h4 id="network-cache"><a href="#network-cache" class="headerlink" title="network cache"></a><code>network cache</code></h4><div class="note info flat"><p>将来开发时我们<code>对静态资源会使用缓存来优化</code>，这样<code>浏览器第二次请求资源就能读取缓存了</code>，速度很快。<br>但是这样的话就会有一个问题, 因为<code>前后输出的文件名是一样</code>的，都叫 <code>main.js</code>，一旦将来<code>发布新版本</code>，<code>因为文件名没有变化</code>导致<code>浏览器会直接读取缓存</code>，<code>不会加载新资源，项目也就没法更新了</code>。所以我们从文件名入手，确保更新前后文件名不一样，这样就可以做缓存了。</p></div><div class="note primary flat"><p><code>hash</code>、<code>contenthash</code> 和 <code>chunkhash</code> 是通过<code>散列函数</code>处理之后，生成的一串字符，可用于区分文件。<br>作用：<code>善用文件的哈希值，解决浏览器缓存导致的资源未及时更新的问题</code></p></div><a class="tag-Link" target="_blank" href="https://blog.csdn.net/sky___Show/article/details/134463495"><div class="tag-link-tips">引用站外地址</div><div class="tag-link-bottom"><div class="tag-link-left" style="background-image:url(https://www.msirknightblog.cn/static/images/site/avatar.jpg)"></div><div class="tag-link-right"><div class="tag-link-title">webpack_hash相关介绍</div><div class="tag-link-sitename">https://blog.csdn.net/sky___Show/article/details/134463495</div></div><i class="fa-solid fa-angle-right"></i></div></a><blockquote><p>为了解决这个问题，我们通常会在文件名上<code>加一些哈希值</code>，保证<code>当更新文件时</code>，浏览器会<code>重新下载资源</code>。这里使用 <code>hash这个占位符</code></p></blockquote><p><strong><code>缓存配置</code></strong></p><blockquote><p>这里通过<code>optimization.runtimeChunk.name</code>来配置, 避免: <code>一个文件被改动时，在其他模块下被引用的文件也会被改动</code>。<br>通过此配置,<code>我们只关心被更改过的文件需要改动</code>!</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">runtimeChunk</span>: &#123;</span><br><span class="line">      <span class="comment">// entry 是入口文件的名字</span></span><br><span class="line">      <span class="attr">name</span>: <span class="function">(<span class="params"> entry </span>) =&gt;</span> <span class="string">`runtimeChunl-<span class="subst">$&#123;entry.name&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><code>配置文件 contenthash</code></strong></p><div class="note info flat"><p>同一个 <code>chunk</code> 中，<code>部分文件修改</code>导致<code>所有文件的哈希值发生变化</code>的问题，可以使用 <code>contenthash</code> <code>来解决，contenthash</code> <code>只和每一个文件的内容有关</code>，<code>内容发生变化，则重新生成哈希值</code>!</p></div><details class="folding-tag"><summary>contenthash</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resovlePath</span>(<span class="string">&quot;../dist&quot;</span>),</span><br><span class="line">    <span class="comment">// 入口主文件输出文件名规则</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/[name].js&quot;</span>,</span><br><span class="line">    <span class="comment">// 动态导入文件输出文件名规则以及其他文件</span></span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&quot;static/js/[name].[contenthash:8].chunk.js&quot;</span>,</span><br><span class="line">    <span class="comment">// 静态资源输出文件名规则</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&quot;static/images/[contenthash:10][ext][query]&quot;</span>,</span><br><span class="line">    <span class="comment">// 在打包前 清空 dist目录 在生成打包新结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">// 配置图片资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|jpeg|gif|svg|eot|png|ico)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="comment">// 配置解析 base64 当图片小于 10kb 转换为 base64 减少请求</span></span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="comment">// 小于100kb的图片转base64</span></span><br><span class="line">            <span class="comment">// 优点: 减少请求数量 缺点: 体积会更大</span></span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// 输出格式 [name]图片的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">          <span class="comment">// contenthash 防止 一个 文件改动时 其他文件下引用该文件的模块也会同时改动问题!</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/image/[name].[contenthash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置图标资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.ttf|woff|woff2?$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="comment">// 输出格式 [name]icon的原名称 [hash:8]生成8位的hash值 id [ext]图片格式后缀扩展名 [query]查询参数 ?aaa=bbb...</span></span><br><span class="line">          <span class="comment">// contenthash 防止 一个 文件改动时 其他文件下引用该文件的模块也会同时改动问题!</span></span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&quot;static/fonts/[name].[contenthash:8][ext][query]&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 提取&lt;style&gt; 内链 样式 到 &lt;link&gt; 外链样式!</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 指定输出目录</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;static/css/[name].[contenthash:8].css&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></details><h4 id="core-js兼容-ES6或最新语法"><a href="#core-js兼容-ES6或最新语法" class="headerlink" title="core-js兼容 ES6或最新语法!"></a><code>core-js</code>兼容 <code>ES6或最新语法</code>!</h4><div class="note info flat"><p>过去我们使用 <code>babel</code> 对 <code>js</code> 代码进行了<code>兼容性处理</code>，其中使用<code>@babel/preset-env</code>智能预设来<code>处理兼容性问题。</code><br>它能将 <code>ES6 的一些语法进行编译转换</code>，比如<code>箭头函数</code>、<code>... 运算符</code>等。但是<code>如果是 async 函数</code>、<code>promise</code>对象、数组的一些方法（<code>includes</code>）等，它没办法处理。<br>所以此时我们 js 代码仍然存在兼容性问题，一旦遇到低版本浏览器会直接报错。所以我们想要将 js 兼容性问题彻底解决！</p></div><div class="note primary flat"><p><code>core-js</code>是专门用来做<code>ES6</code> 以及<code>以上</code> <code>API</code> 的 <code>polyfill</code>。<br><code>polyfill</code>翻译过来叫做<code>垫片/补丁。</code>就是<code>用社区上提供的一段代码</code>，<code>让我们在不兼容某些新特性的浏览器上，使用该新特性。</code></p></div><p><strong><code>安装 core-js</code></strong><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D core-js</span><br></pre></td></tr></table></figure><p></p><p class="p red">全局引入 core-js</p><blockquote><p><code>main.js</code><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;core-js&quot;</span>;</span><br></pre></td></tr></table></figure><br><div class="note danger flat"><p><code>全局引入</code> 会增加打包的体积大小!</p></div><p></p></blockquote><p class="p red">按需引入 core-js</p><blockquote><p><code>main.js</code><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;core-js/e/promise&quot;</span>;</span><br></pre></td></tr></table></figure><p></p></blockquote><div class="note danger flat"><p><code>按需引入</code> 打包后，虽然体积小了，但是有许多<code>新的语法内容</code> 不可能一个个导入吧!</p></div><div class="note info flat"><p>通过<code>@babel/preset-env</code>预设,来帮我门自动按需导入!<br><code>预设</code>会自动分析<code>代码中有哪些需要转换的</code> 并 <code>进行按需导入处理!</code></p></div><p><code>babel.config.js</code><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@babel/preset-env&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 配置 core-js 按需加载</span></span><br><span class="line">        <span class="attr">useBuiltIns</span>: <span class="string">&quot;usage&quot;</span>,</span><br><span class="line">        <span class="comment">// 版本</span></span><br><span class="line">        <span class="attr">corejs</span>: <span class="number">3</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p></p><h4 id="PWA处理离线问题"><a href="#PWA处理离线问题" class="headerlink" title="PWA处理离线问题"></a><code>PWA</code>处理离线问题</h4><div class="note info flat"><p><code>PWA</code>是<code>渐进式网络应用程序</code>(<code>progressive web application - PWA</code>)：是一种可以提供类似于 <code>native app(原生应用程序) 体验的 Web App 的技术</code>。<br>其中最重要的是，<code>在 离线(offline) 时应用程序能够继续运行功能。</code><br>内部通过 <code>Service Workers</code> 技术实现的。</p></div><p><strong><code>安装包</code></strong><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i workbox-webpack-plugin -D</span><br></pre></td></tr></table></figure><p></p><p><strong><code>修改配置文件</code></strong><br><code>webpack.config.js</code><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">WorkboxPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;workbox-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 配置 ServiceWorkers</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">WorkboxPlugin</span>.<span class="title class_">GenerateSW</span>(&#123;</span><br><span class="line">      <span class="comment">// 这些选项帮助快速启用 ServiceWorkers</span></span><br><span class="line">      <span class="comment">// 不允许遗留任何“旧的” ServiceWorkers</span></span><br><span class="line">      <span class="attr">clientsClaim</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">skipWaiting</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>修改<code>main.js</code></strong><br></p><p class="p blue">加入以下代码! 判断浏览器是否支持 ServiceWorkers</p><p></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">&quot;serviceWorker&quot;</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    navigator.<span class="property">serviceWorker</span></span><br><span class="line">      .<span class="title function_">register</span>(<span class="string">&quot;/service-worker.js&quot;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">registration</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;SW registered: &quot;</span>, registration);</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function">(<span class="params">registrationError</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;SW registration failed: &quot;</span>, registrationError);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p class="p red">在 chrome 中好像访问不到`serviceWorker`...</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><details class="folding-tag"><summary>总结</summary><div class="content"><p>我们从 4 个角度对 webpack 和代码进行了优化：</p><ol><li><code>提升开发体验</code><br>使用 <code>Source Map</code> 让开发或上线时代码报错能有更加准确的错误提示。</li><li>提升 <code>webpack</code> 提升打包构建速度<br>使用 <code>HotModuleReplacement</code> 让开发时只重新编译打包更新变化了的代码，不变的代码使用缓存，从而使更新速度更快。<br>使用 <code>OneOf</code> 让资源文件一旦被某个 loader 处理了，就不会继续遍历了，打包速度更快。<br>使用 <code>Include/Exclude</code> 排除或只<code>检测某些文件</code>，<code>处理的文件更少，速度更快。</code><br>使用 <code>Cache</code> 对 eslint 和 babel 处理的结果进行缓存，让第二次打包速度更快。<br>使用 <code>Thead</code> 多进程处理 <code>eslint</code> 和 <code>babel</code> 任务，速度更快。（<code>需要注意的是，进程启动通信都有开销的，要在比较多代码处理时使用才有效果</code>）</li><li><code>减少代码体积</code><br>使用 <code>Tree Shaking</code> 剔除了没有使用的多余代码，让代码体积更小。<br>使用 <code>@babel/plugin-transform-runtime</code> 插件对 babel 进行处理，让辅助代码从中引入，而不是每个文件都生成辅助代码，从而体积更小。<br>使用 <code>Image Minimizer</code> 对项目中图片进行压缩，体积更小，请求速度更快。（需要注意的是，如果项目中图片都是在线链接，那么就不需要了。本地项目静态图片才需要进行压缩。）</li><li><code>优化代码运行性能</code><br>使用 <code>Code Split</code> 对代码进行分割成多个 js 文件，从而使单个文件体积更小，并行加载 js 速度更快。并通过 import 动态导入语法进行按需加载，从而达到需要使用时才加载该资源，不用时不加载资源。<br>使用 <code>Preload / Prefetch</code> 对代码进行提前加载，等未来需要使用时就能直接使用，从而用户体验更好。<br>使用 <code>Network Cache</code> 能对输出资源文件进行更好的命名，将来好做缓存，从而用户体验更好。<br>使用 <code>Core-js</code> 对 js 进行兼容性处理，让我们代码能运行在低版本浏览器。<br>使用 <code>PWA</code> 能让代码离线也能访问，从而提升用户体验。</li></ol></div></details><h2 id="webpack-和-vue3配置"><a href="#webpack-和-vue3配置" class="headerlink" title="webpack 和 vue3配置"></a><code>webpack 和 vue3</code>配置</h2><h3 id="开发模式配置"><a href="#开发模式配置" class="headerlink" title="开发模式配置"></a><code>开发模式配置</code></h3><h4 id="准备-vue-相关包"><a href="#准备-vue-相关包" class="headerlink" title="准备 vue 相关包"></a><code>准备 vue 相关包</code></h4><div class="table-container"><table><thead><tr><th>依赖包</th><th>描述</th></tr></thead><tbody><tr><td><code>vue</code></td><td>vue <code>框架</code></td></tr><tr><td><code>vue-loader</code></td><td>vue <code>模块加载器</code>,在项目中用来解析<code>.vue</code>文件!</td></tr><tr><td><code>vue-template-compiler</code></td><td>vue <code>模板编译器</code> 是编译vue模板(<code>template</code>)的包，传入模板返回AST抽象语法树,<code>ast</code>是为了生成<code>render</code>函数用的。</td></tr><tr><td><code>vue-style-loader</code></td><td>vue <code>样式加载器</code></td></tr></tbody></table></div><p><code>安装 vue</code><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue -S</span><br></pre></td></tr></table></figure><p></p><p><code>安装 vue plugin</code><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-loader vue-style-loader vue-template-compiler -D</span><br></pre></td></tr></table></figure><p></p><h4 id="配置webpacl-config-js"><a href="#配置webpacl-config-js" class="headerlink" title="配置webpacl.config.js"></a>配置<code>webpacl.config.js</code></h4><blockquote><p>在<code>webpack.config.js</code> 顶部位置加入<code>vue-loader</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">VueLoaderPlugin</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue-loader&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="comment">// 添加解析规则</span></span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">/* vue-loader 匹配 vue 文件 进行解析! */</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="string">&quot;vue-loader&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 注册插件</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">VueLoaderPlugin</span>(),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">├── babel.config.js</span><br><span class="line">├── dist</span><br><span class="line">│   ├── index.html</span><br><span class="line">│   └── static</span><br><span class="line">│       ├── images</span><br><span class="line">│       │   └── flutter_launcher_icons_run.103b4c4cc8.jpg</span><br><span class="line">│       └── js</span><br><span class="line">│           └── main.js</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── package.json</span><br><span class="line">├── pnpm-lock.yaml</span><br><span class="line">├── public</span><br><span class="line">│   └── index.html</span><br><span class="line">├── src</span><br><span class="line">│   ├── App.vue</span><br><span class="line">│   ├── assets</span><br><span class="line">│   │   └── image</span><br><span class="line">│   │       └── flutter_launcher_icons_run.jpg</span><br><span class="line">│   ├── components</span><br><span class="line">│   ├── main.js</span><br><span class="line">│   ├── style</span><br><span class="line">│   │   └── index.css</span><br><span class="line">│   ├── utils</span><br><span class="line">│   │   └── index.js</span><br><span class="line">│   └── views</span><br><span class="line">│       └── index.vue</span><br><span class="line">└── webpack.config.js</span><br></pre></td></tr></table></figure><h4 id="新建App-vue"><a href="#新建App-vue" class="headerlink" title="新建App.vue"></a>新建<code>App.vue</code></h4><details class="folding-tag"><summary>app.vue</summary><div class="content"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">        hello-webpack-vue</span><br><span class="line">        <span class="tag">&lt;<span class="name">index</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> index <span class="keyword">from</span> <span class="string">&#x27;./views/index.vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.title</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: blueviolet;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div></details><h4 id="挂载app-vue到-app"><a href="#挂载app-vue到-app" class="headerlink" title="挂载app.vue到#app"></a>挂载<code>app.vue</code>到<code>#app</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span><br></pre></td></tr></table></figure><div class="note info flat"><p>确保<code>public/index.html</code> 中已有<code>&lt;div id=&quot;#app&quot;&gt;&lt;/div&gt;</code></p></div><h4 id="配置package-json-1"><a href="#配置package-json-1" class="headerlink" title="配置package.json"></a>配置<code>package.json</code></h4><div class="note info flat"><p>在<code>package.json</code>中配置<code>scripts.dev</code>脚本!</p></div><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx webpack serve&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx webpack&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><div class="note danger flat"><p>确保<code>webpack.config.js</code>中配置了<code>devServer</code>,如果没有配置需要安装以下插件,进行配置!</p></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-dev-server -D</span><br></pre></td></tr></table></figure><p class="p blue">然后在`webpack.config.js`中配置`devServer`!</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3000</span>,</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="vue-警告问题"><a href="#vue-警告问题" class="headerlink" title="vue 警告问题"></a><code>vue</code> 警告问题</h4><div class="note warning flat"><p>runtime-core.esm-bundler.js:5371 Feature flags <code>__VUE_OPTIONS_API__</code>, <code>__VUE_PROD_DEVTOOLS__</code>, <code>__VUE_PROD_HYDRATION_MISMATCH_DETAILS__</code> are not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.</p><p>For more details, see <a target="_blank" rel="noopener" href="https://link.vuejs.org/feature-flags">https://link.vuejs.org/feature-flags</a>.</p></div><p class="p red">需要在 webpack.config.js 中加以配置!</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DefinePlugin</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;webpack&#x27;</span>;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 解决页面警告 vue 源码中用到</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">      <span class="attr">__VUE_OPTIONS_API__</span>: <span class="string">&quot;true&quot;</span>,</span><br><span class="line">      <span class="attr">__VUE_PROD_DEVTOOLS__</span>: <span class="string">&quot;false&quot;</span>,</span><br><span class="line">      <span class="attr">__VUE_PROD_HYDRATION_MISMATCH_DETAILS__</span>: <span class="string">&quot;false&quot;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="vue3-eslint配置"><a href="#vue3-eslint配置" class="headerlink" title="vue3 eslint配置"></a><code>vue3 eslint</code>配置</h4><blockquote><p><code>plugin:vue/vue3-essential</code> 需要安装以下插件!<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint-plugin-vue -D</span><br></pre></td></tr></table></figure><br><p class="p blue">新建 .eslintrc.js</p><p></p></blockquote><details class="folding-tag"><summary>eslintrc</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>, <span class="comment">// 启用 node 中的全局变量</span></span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>, <span class="comment">// 启用浏览器中的全局变量</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 继承规则 vue 和 eslint 官方规则</span></span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;plugin:vue/vue3-essential&quot;</span>, <span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">6</span>, <span class="comment">// es6 syntax</span></span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>, <span class="comment">// es module</span></span><br><span class="line">    <span class="comment">// parser: &quot;babel-eslint&quot;,</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-console&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-debugger&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-var&quot;</span>: <span class="string">&quot;error&quot;</span>, <span class="comment">// 禁止使用 var 定义变量</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><details class="folding-tag"><summary>webpack.config.js</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// html 压缩插件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// eslint 代码规范检查</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// vue-loader 解析 .vue 文件!</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">VueLoaderPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;vue-loader&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">DefinePlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resolve</span> = (<span class="params">src</span>) =&gt; path.<span class="title function_">resolve</span>(__dirname, src);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getStyleLoader</span>(<span class="params">pre = <span class="string">&quot;&quot;</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">    <span class="comment">// &quot;style-loader&quot;,</span></span><br><span class="line">    <span class="string">&quot;vue-style-loader&quot;</span>,</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [<span class="string">&quot;postcss-preset-env&quot;</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    pre,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 出口文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resolve</span>(<span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="comment">// 入口主文件输出文件名规则 main.js</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;static/js/[name].js&quot;</span>,</span><br><span class="line">    <span class="comment">// 动态导入文件输出文件名规则以及其他文件 模块文件(chunk)</span></span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&quot;static/js/[name].[contenthash:8].chunk.js&quot;</span>,</span><br><span class="line">    <span class="comment">// 静态资源输出文件名规则</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&quot;static/images/[name].[contenthash:10][ext][query]&quot;</span>,</span><br><span class="line">    <span class="comment">// 在打包前 清空 dist目录 在生成打包新结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置 devServer</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3000</span>,</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 配置代理</span></span><br><span class="line">    <span class="comment">/* proxy: &#123;</span></span><br><span class="line"><span class="comment">      &quot;/api&quot;: &#123;</span></span><br><span class="line"><span class="comment">        target: &quot;http://localhost:3000&quot;,</span></span><br><span class="line"><span class="comment">        pathRewrite: &#123;</span></span><br><span class="line"><span class="comment">          &quot;^/api&quot;: &quot;&quot;,</span></span><br><span class="line"><span class="comment">        &#125;,</span></span><br><span class="line"><span class="comment">      &#125;,</span></span><br><span class="line"><span class="comment">    &#125;, */</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// loader 配置</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">// 配置样式 loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">cacheDirectory</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// 关闭缓存文件压缩</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置 vue-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="string">&quot;vue-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp|svg)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="comment">// 将小的资源图片转换为 base64</span></span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="comment">// 小于100kb的图片转base64</span></span><br><span class="line">            <span class="comment">// 优点: 减少请求数量 缺点: 体积会更大</span></span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// webpack 扩展插件</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 配置 index.html 基础模版</span></span><br><span class="line">      <span class="attr">template</span>: <span class="title function_">resolve</span>(<span class="string">&quot;public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// eslint配置</span></span><br><span class="line">      <span class="comment">// 解析  针对 src 目录下的文件进行规则校验</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">      <span class="attr">extensions</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;vue&quot;</span>],</span><br><span class="line">      <span class="comment">// 排除 node_modules</span></span><br><span class="line">      <span class="attr">exclude</span>: [<span class="string">&quot;node_modules&quot;</span>],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">VueLoaderPlugin</span>(),</span><br><span class="line">    <span class="comment">// 解决页面警告 vue 源码中用到</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">      <span class="attr">__VUE_OPTIONS_API__</span>: <span class="string">&quot;true&quot;</span>,</span><br><span class="line">      <span class="attr">__VUE_PROD_DEVTOOLS__</span>: <span class="string">&quot;false&quot;</span>,</span><br><span class="line">      <span class="attr">__VUE_PROD_HYDRATION_MISMATCH_DETAILS__</span>: <span class="string">&quot;false&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="comment">// source map 便于报错调试</span></span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;cheap-module-source-map&quot;</span>,</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="comment">// 代码分割分成小块</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><h3 id="生产模式配置"><a href="#生产模式配置" class="headerlink" title="生产模式配置"></a><code>生产模式配置</code></h3><details class="folding-tag"><summary>webpack.config.js</summary><div class="content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"><span class="comment">// html 压缩插件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// css 样式提取单个文件插件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// css 压缩插件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerWepackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// js压缩插件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TerserWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// 复制 public/... 文件 到 打包目录下 dist/...</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CopyPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;copy-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// eslint 代码规范检查</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;eslint-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="comment">// vue-loader 解析 .vue 文件!</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">VueLoaderPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;vue-loader&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">DefinePlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> threads = os.<span class="title function_">cpus</span>().<span class="property">length</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resolve</span> = (<span class="params">src</span>) =&gt; path.<span class="title function_">resolve</span>(__dirname, src);</span><br><span class="line"><span class="keyword">const</span> isProd = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;isProd&quot;</span>, isProd, process.<span class="property">env</span>.<span class="property">NODE_ENV</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getStyleLoader</span>(<span class="params">pre = <span class="string">&quot;&quot;</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">// 执行顺序 从 右 到 左 从 下 到上</span></span><br><span class="line">    <span class="comment">// &quot;style-loader&quot;,</span></span><br><span class="line">    isProd &amp;&amp; <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span> || <span class="string">&quot;vue-style-loader&quot;</span>,</span><br><span class="line">    <span class="comment">// &quot;vue-style-loader&quot;,</span></span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">          <span class="attr">plugins</span>: [<span class="string">&quot;postcss-preset-env&quot;</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    pre,</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 环境模式</span></span><br><span class="line">  <span class="attr">mode</span>: (isProd &amp;&amp; <span class="string">&quot;production&quot;</span>) || <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="comment">// 出口文件</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: (isProd &amp;&amp; <span class="title function_">resolve</span>(<span class="string">&quot;dist&quot;</span>)) || <span class="literal">undefined</span>,</span><br><span class="line">    <span class="comment">// 入口主文件输出文件名规则 main.js</span></span><br><span class="line">    <span class="attr">filename</span>:</span><br><span class="line">      (isProd &amp;&amp; <span class="string">&quot;static/js/[name].[contenthash:8].js&quot;</span>) ||</span><br><span class="line">      <span class="string">&quot;static/js/[name].js&quot;</span>,</span><br><span class="line">    <span class="comment">// 动态导入文件输出文件名规则以及其他文件 模块文件(chunk)</span></span><br><span class="line">    <span class="attr">chunkFilename</span>:</span><br><span class="line">      (isProd &amp;&amp; <span class="string">&quot;static/js/[name].[contenthash:8].chunk.js&quot;</span>) ||</span><br><span class="line">      <span class="string">&quot;static/js/[name].chunk.js&quot;</span>,</span><br><span class="line">    <span class="comment">// 静态资源输出文件名规则</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>:</span><br><span class="line">      (isProd &amp;&amp; <span class="string">&quot;static/images/[name].[contenthash:10][ext][query]&quot;</span>) ||</span><br><span class="line">      <span class="string">&quot;static/images/[name].[ext][query]&quot;</span>,</span><br><span class="line">    <span class="comment">// 在打包前 清空 dist目录 在生成打包新结果</span></span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置 devServer</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3000</span>,</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 配置代理</span></span><br><span class="line">    <span class="comment">/* proxy: &#123;</span></span><br><span class="line"><span class="comment">      &quot;/api&quot;: &#123;</span></span><br><span class="line"><span class="comment">        target: &quot;http://localhost:3000&quot;,</span></span><br><span class="line"><span class="comment">        pathRewrite: &#123;</span></span><br><span class="line"><span class="comment">          &quot;^/api&quot;: &quot;&quot;,</span></span><br><span class="line"><span class="comment">        &#125;,</span></span><br><span class="line"><span class="comment">      &#125;,</span></span><br><span class="line"><span class="comment">    &#125;, */</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// loader 配置</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">// 配置样式 loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="title function_">getStyleLoader</span>(),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">cacheDirectory</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">cacheCompression</span>: <span class="literal">false</span>, <span class="comment">// 关闭缓存文件压缩</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置 vue-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="string">&quot;vue-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp|svg)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="comment">// 将小的资源图片转换为 base64</span></span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="comment">// 小于100kb的图片转base64</span></span><br><span class="line">            <span class="comment">// 优点: 减少请求数量 缺点: 体积会更大</span></span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// webpack 扩展插件</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 配置 index.html 基础模版</span></span><br><span class="line">      <span class="attr">template</span>: <span class="title function_">resolve</span>(<span class="string">&quot;public/index.html&quot;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// eslint配置</span></span><br><span class="line">      <span class="comment">// 解析  针对 src 目录下的文件进行规则校验</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">      <span class="attr">extensions</span>: [<span class="string">&quot;js&quot;</span>, <span class="string">&quot;vue&quot;</span>],</span><br><span class="line">      <span class="comment">// 排除 node_modules</span></span><br><span class="line">      <span class="attr">exclude</span>: [<span class="string">&quot;node_modules&quot;</span>],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// 这里只有打包的时候才会用到</span></span><br><span class="line">    isProd &amp;&amp;</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CopyPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">patterns</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">from</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;./public&quot;</span>),</span><br><span class="line">            <span class="attr">to</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">            <span class="attr">toType</span>: <span class="string">&quot;dir&quot;</span>,</span><br><span class="line">            <span class="attr">noErrorOnMissing</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">globOptions</span>: &#123;</span><br><span class="line">              <span class="attr">ignore</span>: [<span class="string">&quot;**/index.html&quot;</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">info</span>: &#123;</span><br><span class="line">              <span class="attr">minimized</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;),</span><br><span class="line">    <span class="comment">// 这个是打包的时候提取css到单独文件</span></span><br><span class="line">    isProd &amp;&amp;</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&quot;static/css/[name].css&quot;</span>,</span><br><span class="line">        <span class="attr">chunkFilename</span>: <span class="string">&quot;static/css/[name].chunk.css&quot;</span>,</span><br><span class="line">      &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">VueLoaderPlugin</span>(),</span><br><span class="line">    <span class="comment">// 解决页面警告 vue 源码中用到</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">      <span class="attr">__VUE_OPTIONS_API__</span>: <span class="string">&quot;true&quot;</span>,</span><br><span class="line">      <span class="attr">__VUE_PROD_DEVTOOLS__</span>: <span class="string">&quot;false&quot;</span>,</span><br><span class="line">      <span class="attr">__VUE_PROD_HYDRATION_MISMATCH_DETAILS__</span>: <span class="string">&quot;false&quot;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>),</span><br><span class="line">  <span class="comment">// source map 便于报错调试 source-map use produciton</span></span><br><span class="line">  <span class="attr">devtool</span>: (isProd &amp;&amp; <span class="string">&quot;source-map&quot;</span>) || <span class="string">&quot;cheap-module-source-map&quot;</span>,</span><br><span class="line">  <span class="comment">// 开发环境 source-map</span></span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="comment">// 是否压缩 打包时才压缩</span></span><br><span class="line">    <span class="attr">minimize</span>: isProd,</span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="comment">// 压缩 css</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerWepackPlugin</span>(),</span><br><span class="line">      <span class="comment">// js 压缩</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserWebpackPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">parallel</span>: threads,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// 代码分割分成小块</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="comment">// 配置路径别名</span></span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&quot;@&quot;</span>: <span class="title function_">resolve</span>(<span class="string">&quot;src&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 自动配置补全文件后缀</span></span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.json&quot;</span>, <span class="string">&quot;.vue&quot;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><div class="note info flat"><p>注意: <code>process.env.NODE_ENV</code> 用到了<code>cross-env</code>插件，若未安装请先安装后在进行配置!</p></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cross-env -D</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cross-env NODE_ENV=development npx webpack serve&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cross-env NODE_ENV=production npx webpack&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="其它文件配置"><a href="#其它文件配置" class="headerlink" title="其它文件配置"></a><code>其它文件配置</code></h3><div class="tabs" id="其它文件"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#其它文件-1">babel.config.js</button></li><li class="tab"><button type="button" data-href="#其它文件-2">eslintrc.js</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="其它文件-1"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="comment">/* &quot;@babel/preset-env&quot;,</span></span><br><span class="line"><span class="comment">      &#123;</span></span><br><span class="line"><span class="comment">        // 配置 core-js 按需加载</span></span><br><span class="line"><span class="comment">        // 处理 js 高级语法 浏览器兼容问题 (promise async await 等语法)</span></span><br><span class="line"><span class="comment">        useBuiltIns: &quot;usage&quot;,</span></span><br><span class="line"><span class="comment">        // 版本</span></span><br><span class="line"><span class="comment">        corejs: 3,</span></span><br><span class="line"><span class="comment">      &#125;, */</span></span><br><span class="line">      <span class="comment">// 使用 vue-cli babel 默认 配置 以上配置无需配置</span></span><br><span class="line">      <span class="string">&quot;@vue/cli-plugin-babel/preset&quot;</span></span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="其它文件-2"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>, <span class="comment">// 启用 node 中的全局变量</span></span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>, <span class="comment">// 启用浏览器中的全局变量</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 继承规则 vue 和 eslint 官方规则</span></span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;plugin:vue/vue3-essential&quot;</span>, <span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&quot;@babel/eslint-parser&quot;</span></span><br><span class="line">    <span class="comment">// ecmaVersion: 6, // es6 syntax</span></span><br><span class="line">    <span class="comment">// sourceType: &quot;module&quot;, // es module</span></span><br><span class="line">    <span class="comment">// parser: &quot;babel-eslint&quot;,</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-console&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-debugger&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-var&quot;</span>: <span class="string">&quot;error&quot;</span>, <span class="comment">// 禁止使用 var 定义变量</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p><code>babel-plugin</code><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @vue/cli-plugin-babel -D</span><br></pre></td></tr></table></figure><p></p><p><code>eslint-plugin</code><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint-plugin-vue -D</span><br><span class="line">npm install @babel/eslint-parser -D</span><br></pre></td></tr></table></figure><p></p><h3 id="优化配置"><a href="#优化配置" class="headerlink" title="优化配置"></a>优化配置</h3><h4 id="Element-Plus"><a href="#Element-Plus" class="headerlink" title="Element Plus"></a><code>Element Plus</code></h4><h5 id="安装-element-plus"><a href="#安装-element-plus" class="headerlink" title="安装 element plus"></a><code>安装 element plus</code></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install element-plus --save</span><br></pre></td></tr></table></figure><h5 id="全局引入"><a href="#全局引入" class="headerlink" title="全局引入"></a><code>全局引入</code></h5><blockquote><p>全局引入 <code>打包体积会变大</code>!</p></blockquote><p><code>main.js</code><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./style/index.css&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;element-plus/dist/index.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span><br></pre></td></tr></table></figure><p></p><h5 id="按需引入"><a href="#按需引入" class="headerlink" title="按需引入"></a><code>按需引入</code></h5><p>首先你需要安装<code>unplugin-vue-components</code> 和 <code>unplugin-auto-import</code>这两款插件</p><div class="note info flat"><p>这两个插件<code>版本过高</code>会报错!<br><code>TypeError:Components is not a function</code><br><code>TypeError:AutoImport is not a function</code><br><code>安装时 限定版本!</code></p></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D unplugin-vue-components@0.25.2 unplugin-auto-import@0.16.1</span><br></pre></td></tr></table></figure><p>引入插件</p><p><code>webpack.config.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AutoImport</span> = <span class="built_in">require</span>(<span class="string">&#x27;unplugin-auto-import/webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Components</span> = <span class="built_in">require</span>(<span class="string">&#x27;unplugin-vue-components/webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="webpack配置缓存组"><a href="#webpack配置缓存组" class="headerlink" title="webpack配置缓存组"></a><code>webpack配置缓存组</code></h4><p><code>webpack.config.js</code><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="comment">// 代码分割分成小块</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">      <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">        <span class="comment">// layouts通常是admin项目的主体布局组件，所有路由组件都要使用的</span></span><br><span class="line">        <span class="comment">// 可以单独打包，从而复用</span></span><br><span class="line">        <span class="comment">// 如果项目中没有，请删除</span></span><br><span class="line">        <span class="attr">layouts</span>: &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;layouts&quot;</span>,</span><br><span class="line">          <span class="attr">test</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src/layouts&quot;</span>),</span><br><span class="line">          <span class="attr">priority</span>: <span class="number">40</span>, <span class="comment">//优先级</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 如果项目中使用element-plus，此时将所有node_modules打包在一起，那么打包输出文件会比较大。</span></span><br><span class="line">        <span class="comment">// 所以我们将node_modules中比较大的模块单独打包，从而并行加载速度更好</span></span><br><span class="line">        <span class="comment">// 如果项目中没有，请删除</span></span><br><span class="line">        <span class="attr">elementUI</span>: &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;chunk-elementPlus&quot;</span>,</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]_?element-plus(.*)/</span>,</span><br><span class="line">          <span class="attr">priority</span>: <span class="number">30</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 将vue相关的库单独打包，减少node_modules的chunk体积。</span></span><br><span class="line">        <span class="attr">vue</span>: &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;vue&quot;</span>,</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]vue(.*)[\\/]/</span>,</span><br><span class="line">          <span class="attr">chunks</span>: <span class="string">&quot;initial&quot;</span>,</span><br><span class="line">          <span class="attr">priority</span>: <span class="number">20</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">libs</span>: &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;chunk-libs&quot;</span>,</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">          <span class="attr">priority</span>: <span class="number">10</span>, <span class="comment">// 权重最低，优先考虑前面内容</span></span><br><span class="line">          <span class="attr">chunks</span>: <span class="string">&quot;initial&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h4 id="关闭性能分析提高打包速度"><a href="#关闭性能分析提高打包速度" class="headerlink" title="关闭性能分析提高打包速度"></a><code>关闭性能分析提高打包速度</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">/* </span></span><br><span class="line"><span class="comment">    在这个配置中，如果入口起点大于500kB或者生成的资源大于500kB，webpack将会发出警告（如果hints设置为&quot;warning&quot;）</span></span><br><span class="line"><span class="comment">    或错误（如果hints设置为&quot;error&quot;）。这有助于识别和优化构建的性能问题。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="attr">performance</span>: &#123;</span><br><span class="line">    <span class="attr">hints</span>: <span class="string">&quot;warning&quot;</span>, <span class="comment">// 或者 &quot;error&quot; 来处理性能问题作为错误</span></span><br><span class="line">    <span class="attr">maxEntrypointSize</span>: <span class="number">512000</span>, <span class="comment">// 500 kB</span></span><br><span class="line">    <span class="attr">maxAssetSize</span>: <span class="number">512000</span>, <span class="comment">// 500 kB</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="loader"><a href="#loader" class="headerlink" title="loader"></a><code>loader</code></h2><div class="note primary flat"><p>帮助 <code>webpack</code> 将<code>不同类型的文件</code>转换为 <code>webpack</code> 可识别的模块。</p></div><a class="tag-Link" target="_blank" href="https://yk2012.github.io/sgg_webpack5/origin/loader.html#loader-%E6%A6%82%E5%BF%B5"><div class="tag-link-tips">引用站外地址</div><div class="tag-link-bottom"><div class="tag-link-left" style="background-image:url(https://www.msirknightblog.cn/static/images/site/avatar.jpg)"></div><div class="tag-link-right"><div class="tag-link-title">loader介绍</div><div class="tag-link-sitename">https://yk2012.github.io/sgg_webpack5/origin/loader.html#loader-%E6%A6%82%E5%BF%B5</div></div><i class="fa-solid fa-angle-right"></i></div></a><h2 id="plugin"><a href="#plugin" class="headerlink" title="plugin"></a><code>plugin</code></h2><a class="tag-Link" target="_blank" href="https://yk2012.github.io/sgg_webpack5/origin/plugin.html#plugin-%E7%9A%84%E4%BD%9C%E7%94%A8"><div class="tag-link-tips">引用站外地址</div><div class="tag-link-bottom"><div class="tag-link-left" style="background-image:url(https://www.msirknightblog.cn/static/images/site/avatar.jpg)"></div><div class="tag-link-right"><div class="tag-link-title">plugin介绍</div><div class="tag-link-sitename">https://yk2012.github.io/sgg_webpack5/origin/plugin.html#plugin-%E7%9A%84%E4%BD%9C%E7%94%A8</div></div><i class="fa-solid fa-angle-right"></i></div></a></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Webpack/">Webpack</a></div><div class="post_share"><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=null" async></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/images/wechat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/wechat.png" alt="微信"></a><div class="post-qr-code-desc">微信</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/03/05/inductive/nodejs/npm-check%E6%A8%A1%E5%9D%97%E5%8D%87%E7%BA%A7%E5%B7%A5%E5%85%B7/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-20.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" onerror='onerror=null,src="https://www.msirknightblog.cn/static/images/blog/404.gif"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">npm-check模块升级工具</div></div></a></div><div class="next-post pull-right"><a href="/2024/03/12/project/vue/vue3%E5%90%8E%E5%8F%B0%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%90%AD%E5%BB%BA/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-17.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" onerror='onerror=null,src="https://www.msirknightblog.cn/static/images/blog/404.gif"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">vue3后台项目结构搭建</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/04/23/inductive/webpack/webpack%E4%B8%AD%E7%9A%84%E9%AD%94%E6%B3%95%E6%B3%A8%E9%87%8A/" title="webpack中的魔法注释"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-5.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-23</div><div class="title">webpack中的魔法注释</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div><div class="comment-barrage"></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/site/avatar.jpg?imageMogr2/thumbnail/200x/blur/1x0/quality/75|imageslim" onerror='this.onerror=null,this.src="https://www.msirknightblog.cn/static/images/blog/404.gif"' alt="avatar"></div><div class="author-info__name">啤啤熊</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">131</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Miaojw0517"><i class="fab fa-github"></i><span>github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Miaojw0517" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="https://gitee.com/miao_jiangwei/projects" target="_blank" title="Gitee"><i class="iconfont icon-gitee"></i></a><a class="social-icon" href="/mjw1046665443@163.com" target="_blank" title="163Email"><i class="iconfont icon-youxiang"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E6%A1%88%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text">简单案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95"><span class="toc-number">2.1.</span> <span class="toc-text">工程目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E5%8F%8A%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.</span> <span class="toc-text">搭建项目目录及文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96-npm-%E7%9B%AE%E5%BD%95"><span class="toc-number">2.3.</span> <span class="toc-text">初始化 npm 目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-webpack-%E4%BE%9D%E8%B5%96"><span class="toc-number">2.4.</span> <span class="toc-text">安装 webpack 依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%89%93%E5%8C%85"><span class="toc-number">2.5.</span> <span class="toc-text">使用打包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-number">3.</span> <span class="toc-text">webpack核心概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack-config-js"><span class="toc-number">4.</span> <span class="toc-text">webpack.config.js</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E6%89%93%E5%8C%85"><span class="toc-number">4.1.</span> <span class="toc-text">重新打包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.</span> <span class="toc-text">开发模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E8%B5%84%E6%BA%90"><span class="toc-number">6.</span> <span class="toc-text">处理资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#css"><span class="toc-number">6.1.</span> <span class="toc-text">css</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#less"><span class="toc-number">6.2.</span> <span class="toc-text">less</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sass"><span class="toc-number">6.3.</span> <span class="toc-text">sass</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#stylus"><span class="toc-number">6.4.</span> <span class="toc-text">stylus</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90"><span class="toc-number">6.5.</span> <span class="toc-text">图片资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87%E6%88%96%E5%85%B6%E4%BB%96%E8%B5%84%E6%BA%90"><span class="toc-number">6.6.</span> <span class="toc-text">字体图标或其他资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86js%E8%B5%84%E6%BA%90"><span class="toc-number">6.7.</span> <span class="toc-text">处理js资源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ESlint%E4%BB%A3%E7%A0%81%E8%A7%84%E5%88%99%E6%A3%80%E6%9F%A5"><span class="toc-number">6.7.1.</span> <span class="toc-text">ESlint代码规则检查</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">6.7.1.1.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E9%85%8D%E7%BD%AE"><span class="toc-number">6.7.1.2.</span> <span class="toc-text">具体配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8webpack%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-number">6.7.1.3.</span> <span class="toc-text">在webpack中使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%89%E8%A3%85eslint"><span class="toc-number">6.7.1.4.</span> <span class="toc-text">安装eslint</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-eslintrc-js-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">6.7.1.5.</span> <span class="toc-text">创建.eslintrc.js 配置文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8webpack%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AEeslint%E6%8F%92%E4%BB%B6"><span class="toc-number">6.7.1.6.</span> <span class="toc-text">在webpack配置文件中配置eslint插件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%91%E7%8E%B0%E9%97%AE%E9%A2%98"><span class="toc-number">6.7.1.7.</span> <span class="toc-text">发现问题</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#babel%E6%94%AF%E6%8C%81js%E6%96%B0%E8%AF%AD%E6%B3%95"><span class="toc-number">6.7.2.</span> <span class="toc-text">babel支持js新语法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-1"><span class="toc-number">6.7.2.1.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E9%85%8D%E7%BD%AE-1"><span class="toc-number">6.7.2.2.</span> <span class="toc-text">具体配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8-webpack%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-number">6.7.2.3.</span> <span class="toc-text">在 webpack中使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-babel"><span class="toc-number">6.7.2.4.</span> <span class="toc-text">安装 babel</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-babel-loader"><span class="toc-number">6.7.2.5.</span> <span class="toc-text">配置 babel-loader</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8-babel-config-js%E4%B8%AD%E9%85%8D%E7%BD%AE"><span class="toc-number">6.7.2.6.</span> <span class="toc-text">在 babel.config.js中配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86html%E8%B5%84%E6%BA%90"><span class="toc-number">6.8.</span> <span class="toc-text">处理html资源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6"><span class="toc-number">6.8.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8webpack-config-js%E4%B8%AD%E5%8A%A0%E5%85%A5%E6%8F%92%E4%BB%B6"><span class="toc-number">6.8.2.</span> <span class="toc-text">在webpack.config.js中加入插件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E8%BE%93%E5%87%BA%E8%B7%AF%E5%BE%84"><span class="toc-number">7.</span> <span class="toc-text">修改文件输出路径</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9main-js%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95"><span class="toc-number">7.1.</span> <span class="toc-text">修改main.js入口文件到指定目录!</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95"><span class="toc-number">7.2.</span> <span class="toc-text">修改图片资源到指定目录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%B8%85%E7%A9%BA%E6%89%93%E5%8C%85%E8%B5%84%E6%BA%90"><span class="toc-number">8.</span> <span class="toc-text">自动清空打包资源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">9.</span> <span class="toc-text">搭建开发服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-1"><span class="toc-number">9.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%8F%92%E4%BB%B6"><span class="toc-number">9.2.</span> <span class="toc-text">配置插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="toc-number">9.3.</span> <span class="toc-text">启动服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7%E6%A8%A1%E5%BC%8F"><span class="toc-number">10.</span> <span class="toc-text">生产模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E5%8F%96css%E6%88%90%E5%8D%95%E7%8B%AC%E6%96%87%E4%BB%B6"><span class="toc-number">10.1.</span> <span class="toc-text">提取css成单独文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%8C%85mini-css-extract-plugin-D"><span class="toc-number">10.1.1.</span> <span class="toc-text">安装包mini-css-extract-plugin -D</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">10.1.2.</span> <span class="toc-text">插件配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#postcss%E6%A0%B7%E5%BC%8F%E5%85%BC%E5%AE%B9%E6%80%A7%E5%A4%84%E7%90%86"><span class="toc-number">10.2.</span> <span class="toc-text">postcss样式兼容性处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-2"><span class="toc-number">10.2.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEpostcss-loader"><span class="toc-number">10.2.2.</span> <span class="toc-text">配置postcss-loader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEpackage-json"><span class="toc-number">10.2.3.</span> <span class="toc-text">配置package.json</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85loader%E9%85%8D%E7%BD%AE"><span class="toc-number">10.3.</span> <span class="toc-text">封装loader配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E5%8E%8B%E7%BC%A9"><span class="toc-number">10.4.</span> <span class="toc-text">css压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-3"><span class="toc-number">10.4.1.</span> <span class="toc-text">安装插件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack-%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE"><span class="toc-number">11.</span> <span class="toc-text">webpack 高级配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sourceMap"><span class="toc-number">11.1.</span> <span class="toc-text">sourceMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HMR"><span class="toc-number">11.2.</span> <span class="toc-text">HMR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OneOf"><span class="toc-number">11.3.</span> <span class="toc-text">OneOf</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#include-%E5%8C%85%E5%87%BD-%E5%92%8C-exclude-%E6%8E%92%E9%99%A4"><span class="toc-number">11.4.</span> <span class="toc-text">include(包函) 和 exclude(排除)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cache-%E7%BC%93%E5%AD%98"><span class="toc-number">11.5.</span> <span class="toc-text">cache 缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%89%93%E5%8C%85"><span class="toc-number">11.6.</span> <span class="toc-text">多进程打包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%8F%E5%B0%91%E4%BB%A3%E7%A0%81%E4%BD%93%E7%A7%AF"><span class="toc-number">11.7.</span> <span class="toc-text">减少代码体积</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tree-shaking"><span class="toc-number">11.7.1.</span> <span class="toc-text">tree-shaking</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#babel%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%93%E7%A7%AF"><span class="toc-number">11.7.2.</span> <span class="toc-text">babel生成文件的体积</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9"><span class="toc-number">11.8.</span> <span class="toc-text">图片压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-4"><span class="toc-number">11.8.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">11.8.2.</span> <span class="toc-text">配置项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CodeSplit%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2"><span class="toc-number">11.9.</span> <span class="toc-text">CodeSplit代码分割</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">11.9.1.</span> <span class="toc-text">多入口文件配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%90%E5%8F%96%E9%87%8D%E5%A4%8D%E4%BB%A3%E7%A0%81"><span class="toc-number">11.9.2.</span> <span class="toc-text">提取重复代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEoptimization%E4%BC%98%E5%8C%96%E9%A1%B9"><span class="toc-number">11.9.3.</span> <span class="toc-text">配置optimization优化项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD"><span class="toc-number">11.9.4.</span> <span class="toc-text">按需加载</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-number">11.10.</span> <span class="toc-text">单文件相关配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#splitChunk"><span class="toc-number">11.10.1.</span> <span class="toc-text">splitChunk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E6%A8%A1%E5%9D%97%E5%91%BD%E5%90%8D"><span class="toc-number">11.10.2.</span> <span class="toc-text">给模块命名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E5%91%BD%E5%90%8D"><span class="toc-number">11.10.3.</span> <span class="toc-text">统一命名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#preload-%E5%92%8C-prefetch"><span class="toc-number">11.10.4.</span> <span class="toc-text">preload 和 prefetch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#network-cache"><span class="toc-number">11.10.5.</span> <span class="toc-text">network cache</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#core-js%E5%85%BC%E5%AE%B9-ES6%E6%88%96%E6%9C%80%E6%96%B0%E8%AF%AD%E6%B3%95"><span class="toc-number">11.10.6.</span> <span class="toc-text">core-js兼容 ES6或最新语法!</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PWA%E5%A4%84%E7%90%86%E7%A6%BB%E7%BA%BF%E9%97%AE%E9%A2%98"><span class="toc-number">11.10.7.</span> <span class="toc-text">PWA处理离线问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">11.11.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack-%E5%92%8C-vue3%E9%85%8D%E7%BD%AE"><span class="toc-number">12.</span> <span class="toc-text">webpack 和 vue3配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">12.1.</span> <span class="toc-text">开发模式配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%86%E5%A4%87-vue-%E7%9B%B8%E5%85%B3%E5%8C%85"><span class="toc-number">12.1.1.</span> <span class="toc-text">准备 vue 相关包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEwebpacl-config-js"><span class="toc-number">12.1.2.</span> <span class="toc-text">配置webpacl.config.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">12.1.3.</span> <span class="toc-text">目录结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BAApp-vue"><span class="toc-number">12.1.4.</span> <span class="toc-text">新建App.vue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%82%E8%BD%BDapp-vue%E5%88%B0-app"><span class="toc-number">12.1.5.</span> <span class="toc-text">挂载app.vue到#app</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEpackage-json-1"><span class="toc-number">12.1.6.</span> <span class="toc-text">配置package.json</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue-%E8%AD%A6%E5%91%8A%E9%97%AE%E9%A2%98"><span class="toc-number">12.1.7.</span> <span class="toc-text">vue 警告问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue3-eslint%E9%85%8D%E7%BD%AE"><span class="toc-number">12.1.8.</span> <span class="toc-text">vue3 eslint配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">12.2.</span> <span class="toc-text">生产模式配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">12.3.</span> <span class="toc-text">其它文件配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="toc-number">12.4.</span> <span class="toc-text">优化配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Element-Plus"><span class="toc-number">12.4.1.</span> <span class="toc-text">Element Plus</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-element-plus"><span class="toc-number">12.4.1.1.</span> <span class="toc-text">安装 element plus</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%BC%95%E5%85%A5"><span class="toc-number">12.4.1.2.</span> <span class="toc-text">全局引入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5"><span class="toc-number">12.4.1.3.</span> <span class="toc-text">按需引入</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#webpack%E9%85%8D%E7%BD%AE%E7%BC%93%E5%AD%98%E7%BB%84"><span class="toc-number">12.4.2.</span> <span class="toc-text">webpack配置缓存组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%8F%90%E9%AB%98%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6"><span class="toc-number">12.4.3.</span> <span class="toc-text">关闭性能分析提高打包速度</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#loader"><span class="toc-number">13.</span> <span class="toc-text">loader</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#plugin"><span class="toc-number">14.</span> <span class="toc-text">plugin</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/05/28/learning/backend/node/nest/nestjs/" title="nestjs"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-7.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" onerror='this.onerror=null,this.src="https://www.msirknightblog.cn/static/images/blog/404.gif"' alt="nestjs"></a><div class="content"><a class="title" href="/2024/05/28/learning/backend/node/nest/nestjs/" title="nestjs">nestjs</a><time datetime="2024-05-28T06:04:08.000Z" title="发表于 2024-05-28 14:04:08">2024-05-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/24/learning/mobile/uniapp/uniCloud%E4%BA%91%E5%BC%80%E5%8F%91/" title="uniCloud云开发"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-13.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" onerror='this.onerror=null,this.src="https://www.msirknightblog.cn/static/images/blog/404.gif"' alt="uniCloud云开发"></a><div class="content"><a class="title" href="/2024/05/24/learning/mobile/uniapp/uniCloud%E4%BA%91%E5%BC%80%E5%8F%91/" title="uniCloud云开发">uniCloud云开发</a><time datetime="2024-05-24T08:45:50.000Z" title="发表于 2024-05-24 16:45:50">2024-05-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/06/learning/mobile/uniapp/uniapp%E7%AC%94%E8%AE%B0/" title="uniapp笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-1.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" onerror='this.onerror=null,this.src="https://www.msirknightblog.cn/static/images/blog/404.gif"' alt="uniapp笔记"></a><div class="content"><a class="title" href="/2024/04/06/learning/mobile/uniapp/uniapp%E7%AC%94%E8%AE%B0/" title="uniapp笔记">uniapp笔记</a><time datetime="2024-04-06T05:21:36.000Z" title="发表于 2024-04-06 13:21:36">2024-04-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/28/inductive/uniapp/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%9B%86%E6%88%90vantui/" title="uniapp微信小程序集成vantui"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-25.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" onerror='this.onerror=null,this.src="https://www.msirknightblog.cn/static/images/blog/404.gif"' alt="uniapp微信小程序集成vantui"></a><div class="content"><a class="title" href="/2024/03/28/inductive/uniapp/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%9B%86%E6%88%90vantui/" title="uniapp微信小程序集成vantui">uniapp微信小程序集成vantui</a><time datetime="2024-03-28T08:58:07.000Z" title="发表于 2024-03-28 16:58:07">2024-03-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/14/inductive/vue/vue%E4%B8%ADtransition%E8%BF%87%E6%B8%A1%E6%8A%96%E5%8A%A8%E9%97%AE%E9%A2%98/" title="vue中transition过渡抖动问题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-5.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" onerror='this.onerror=null,this.src="https://www.msirknightblog.cn/static/images/blog/404.gif"' alt="vue中transition过渡抖动问题"></a><div class="content"><a class="title" href="/2024/03/14/inductive/vue/vue%E4%B8%ADtransition%E8%BF%87%E6%B8%A1%E6%8A%96%E5%8A%A8%E9%97%AE%E9%A2%98/" title="vue中transition过渡抖动问题">vue中transition过渡抖动问题</a><time datetime="2024-03-14T06:28:37.000Z" title="发表于 2024-03-14 14:28:37">2024-03-14</time></div></div></div></div><div class="card-widget card-cheesy_pick-up_lines"><div class="card-content"><div class="item-headline"><i class="fas fa-heart" style="color:pink"></i><span>土味情话</span></div><div id="cheesy_pick-up_lines-container"></div></div></div><script data-pjax="data-pjax" src="/js/cheesy_pick-up_lines.js"></script></div></div></main><footer id="footer"><div id="footer-wrap"><div id="running-time"></div><div class="copyright">&copy;2022 - 2024 By 啤啤熊</div><div class="icp"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><span>京ICP备2022026194号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">簡</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a></div></div><div id="nav-music"><div id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()">播放音乐</div><meting-js id="1708664797" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="fa-solid fa-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="fa-solid fa-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="fa-solid fa-arrow-rotate-right"></i></div><div class="rightMenu-item" id="menu-top"><i class="fa-solid fa-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="fas fa-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="fas fa-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="fas fa-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="fas fa-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="fas fa-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="fas fa-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="fas fa-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-search"><i class="fa-solid fa-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="fa-solid fa-magnifying-glass"></i><span>百度搜索</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="fas fa-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="fas fa-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="fas fa-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item menu-link" href="/privacy/"><i class="fa-solid fa-hand"></i><span>隐私协议</span></a><a class="rightMenu-item menu-link" href="/cc/"><i class="fa-solid fa-closed-captioning"></i><span>版权协议</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><div class="rightMenu-item" id="menu-copy"><i class="fas fa-copy"></i><span>复制地址</span></div><a class="rightMenu-item" id="menu-darkmode" href="javascript:navFn.switchDarkMode();"><i class="fa-solid fa-moon"></i><span class="menu-darkmode-text">显示模式</span></a><div class="rightMenu-item" id="menu-translate"><i class="fas fa-language"></i><span>轉為繁體</span></div></div></div><div id="rightmenu-mask"></div><div><script src="https://www.msirknightblog.cn/static/js/utils.js"></script><script src="https://www.msirknightblog.cn/static/js/main.js"></script><script src="https://www.msirknightblog.cn/static/js/tw_cn.js"></script><script src="https://npm.elemecdn.com/@fancyapps/ui@latest/dist/fancybox.umd.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.js"></script><script src="https://npm.elemecdn.com/algoliasearch@latest/dist/algoliasearch-lite.umd.js"></script><script src="https://npm.elemecdn.com/instantsearch.js@latest/dist/instantsearch.production.min.js"></script><script src="https://www.msirknightblog.cn/static/js/search/algolia.js"></script><script>(()=>{const t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://knight-twikoo.cn/",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))};const o=()=>{t()},e=()=>{"object"==typeof twikoo?setTimeout(o,0):getScript("https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/twikoo/1.4.18/twikoo.all.min.js").then(o)};btf.loadComment(document.getElementById("twikoo-wrap"),e)})()</script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><script charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js"></script><script src="https://sdk.51.la/perf/js-sdk-perf.min.js" crossorigin="anonymous"></script><script src="/js/random.js"></script><script>setInterval(()=>{var e=Math.round(new Date("2022-8-22-15:02:54").getTime()/1e3);let t=Math.round(((new Date).getTime()+288e5)/1e3)-e,n=new Array(0,0,0,0,0);31536e3<=t&&(n[0]=parseInt(t/31536e3),t%=31536e3),86400<=t&&(n[1]=parseInt(t/86400),t%=86400),3600<=t&&(n[2]=parseInt(t/3600),t%=3600),60<=t&&(n[3]=parseInt(t/60),t%=60),0<t&&(n[4]=t),currentTimeHtml="小破站已经安全运行 "+n[0]+" 年 "+n[1]+" 天 "+n[2]+" 时 "+n[3]+" 分 "+n[4]+" 秒";e=document.getElementById("running-time");e&&(e.innerHTML=currentTimeHtml)},1e3)</script><script type="text/javascript" defer src="/js/commentBarrage.js"></script><script async data-pjax src="/js/waterfall/waterfall.js"></script><script data-pjax src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/js/swiper.min.js"></script><script defer src="/js/gallery.js?v1"></script><script defer data-pjax src="https://www.msirknightblog.cn/static/js/custom.js"></script><script defer src="https://www.msirknightblog.cn/static/js/anzhiyu.js"></script><script defer data-pjax src="https://www.msirknightblog.cn/static/js/anzhiyufunction.js"></script><script defer data-pjax src="https://www.msirknightblog.cn/static/js/rightMenu2.js"></script><canvas id="universe"></canvas><script async src="/js/universe.js"></script></div><script data-pjax>var parent,child;document.getElementById("recent-posts")&&(location.pathname,1)&&(parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://ppxiong.msirknightblog.cn/categories/FrontEnd/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📚 前端 (73)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ppxiong.msirknightblog.cn/categories/Butterlfy/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🎮 Butterlfy (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ppxiong.msirknightblog.cn/categories/Nginx/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">👩‍💻 Nginx (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ppxiong.msirknightblog.cn/categories/Linux/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 Linux (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ppxiong.msirknightblog.cn/categories/Tools/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">💡 Tools (9)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ppxiong.msirknightblog.cn/categories/移动端/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🐱 移动端 (21)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ppxiong.msirknightblog.cn/categories/Map/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🐱 Map (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://ppxiong.msirknightblog.cn/categories/Git/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">💡 Git (5)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://ppxiong.msirknightblog.cn/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>',console.log("已挂载magnet"),parent.insertAdjacentHTML("afterbegin",child))</script><style>#catalog_magnet{flex-wrap:wrap;display:flex;width:100%;justify-content:space-between;padding:10px 10px 0 10px;align-content:flex-start}.magnet_item{flex-basis:calc(50% - 5px);background:#f2f2f2;margin-bottom:10px;border-radius:8px;transition:all .2s ease-in-out}.magnet_item:hover{background:#b30070}.magnet_link_more{color:#555}.magnet_link{color:#000}.magnet_link:hover{color:#fff}@media screen and (max-width:600px){.magnet_item{flex-basis:100%}}.magnet_link_context{display:flex;padding:10px;font-size:16px;transition:all .2s ease-in-out}.magnet_link_context:hover{padding:10px 20px}</style><style></style><script data-pjax>function butterfly_swiper_injector_config(){var i=document.getElementById("head-swiper");console.log("已挂载butterfly_swiper"),i.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/02/07/inductive/javascript/ArryBuffer类型转换为Json/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-33.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-02-07</span><a class="blog-slider__title" href="2023/02/07/inductive/javascript/ArryBuffer类型转换为Json/" alt="">ArryBuffer类型转换为Json</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/02/07/inductive/javascript/ArryBuffer类型转换为Json/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/08/07/learning/node/node环境搭建/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-26.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-07</span><a class="blog-slider__title" href="2022/08/07/learning/node/node环境搭建/" alt="">Node环境搭建</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2022/08/07/learning/node/node环境搭建/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/08/06/inductive/nodejs/设置仓库地址/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-25.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-06</span><a class="blog-slider__title" href="2022/08/06/inductive/nodejs/设置仓库地址/" alt="">设置仓库地址</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2022/08/06/inductive/nodejs/设置仓库地址/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/05/20/inductive/flutter/Flutter常用插件/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-5.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-20</span><a class="blog-slider__title" href="2023/05/20/inductive/flutter/Flutter常用插件/" alt="">Flutter常用插件</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/05/20/inductive/flutter/Flutter常用插件/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/07/07/inductive/javascript/常用的工具函数/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-27.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-07-07</span><a class="blog-slider__title" href="2022/07/07/inductive/javascript/常用的工具函数/" alt="">JS常用的工具函数</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2022/07/07/inductive/javascript/常用的工具函数/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/05/30/inductive/javascript/ArrayBuffer 转 base64/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-16.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-05-30</span><a class="blog-slider__title" href="2022/05/30/inductive/javascript/ArrayBuffer 转 base64/" alt="">ArrayBuffer 转 base64</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2022/05/30/inductive/javascript/ArrayBuffer 转 base64/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/03/05/work/记录下工作开发中遇到的问题/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.msirknightblog.cn/static/images/blog/sdjklajdiw-27.jpg?imageMogr2/thumbnail/640x640/format/webp/blur/1x0/quality/50" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-05</span><a class="blog-slider__title" href="2023/03/05/work/记录下工作开发中遇到的问题/" alt="">记录下工作开发中遇到的问题!</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/03/05/work/记录下工作开发中遇到的问题/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInUp"),arr[i].setAttribute("data-wow-duration",".9s"),arr[i].setAttribute("data-wow-delay","0"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInUp"),arr[i].setAttribute("data-wow-duration",".9s"),arr[i].setAttribute("data-wow-delay","0"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("article-sort-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeIn"),arr[i].setAttribute("data-wow-duration",".9s"),arr[i].setAttribute("data-wow-delay","0"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","1")</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script></body></html>